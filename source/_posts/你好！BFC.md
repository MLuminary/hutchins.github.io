---
title: 你好！BFC!
date: 2017-08-09 21:09:47
tags: 
  - BFC
  - css
categories: css
---
>BFC这个名字听过很多次了，文章中总是说触发BFC然后怎样怎样，开始的时候觉得BFC很神秘，应该很难，当时只为解决眼前问题的我，就没有选择去了解一下BFC，只是知道有BFC的存在，但并不认识他，今天终于鼓起勇气想他打个招呼，认识认识这位看似神秘的朋友.

## 文档流

我们常说的文档流分为三种，普通流，浮动流和定位流。在这里简单的介绍一下。  
在普通流中，元素按照在HTML中的先后位置至上而下布局，块级元素从上到下依次排列，框之间的垂直距离由框的垂直margin计算得到。行内元素在一行中水平布置，直到占满一行则换行  
浮动流，就是元素被设置了浮动属性，一开始还是按照普通流布局，但是会根据浮动的方向移动。
定位流就是设置了定位属性，元素完全脱离普通流。

## BFC定义

BFC(Block Formating Context),直译过来就是块级格式化上下文(在CSS3中，BFC叫做Flow Root)。FC就是其实就是普通流的意思，是一块渲染区域，有他的渲染规则。那B就是block就是块级元素。**简单的理解来说，有一块独立的渲染区域，只有block元素，这些block元素按照此渲染区域的规则布局，并且不受这个区域外部的其它元素影响。**
<!--more-->
## BFC的触发

- 根元素
- 浮动元素
- 绝对定位和固定定位
- display为inline-block||table-cell||table-caption||flex||inline-flex
- overflow不是visible

满足以上任意一个条件都可以触发BFC,触发BFC不是元素本身变成了BFC，而是这个元素带有了BFC的规则。

## BFC的规则

为什么要触发BFC，那BFC到底有什么规则，有什么好处呢？


- Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠

- BFC的区域不会与float box重叠。

- 计算BFC的高度时，浮动元素也参与计算

## 作用

其实BFC完全贯彻的一点就是，BFC是一个独立的不受外部影响的一个渲染区域，他也不会去影响别的元素。

### margin重叠

```css
.box{
  background-color: red;
  margin: 100px;
  width: 100px;
  height: 100px;
}
```

```html
<div class="box">box1</div>
<div class="box">box2</div>
```

我们知道两个box1和box2的中间间距会发生margin重叠并只有100px,那是因为他们同在html下的一个大的BFC中的一个渲染区域中，我们只要让他们两个的BFC区域不同，他们两个就不会发生margin重叠.  

在box2添加div包裹层,然后在此包裹层中添加任意规则属性，就会发现margin重叠问题已经解决.因为此时box2身处的BFC和box1就不相同了。

### 清除浮动

剩下两个规则都与浮动有关，其实我听说BFC这个名词也是因为清除浮动，因为BFC不能影响外部的布局，所以计算高度时，浮动也参加运算，因此就解决了高度塌陷这个问题。

## 总结

前端之路还在继续，认识了BFC以后也会去多多了解磨合。总之现在严格记住的一点就是他是一个独立的不影响外部也不受外部影响的区域，那其他的特性都是建立在此基础上的。
