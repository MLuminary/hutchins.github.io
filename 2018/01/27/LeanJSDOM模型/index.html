<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="keywords" content="LeanJs,ES5">
<meta property="og:type" content="article">
<meta property="og:title" content="LeanJs「 ES5 」-- DOM 模型">
<meta property="og:url" content="http://github.com/2018/01/27/LeanJSDOM模型/index.html">
<meta property="og:site_name" content="Hutchins">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://github.com/2018/01/27/LeanJSDOM模型/js.png">
<meta property="og:updated_time" content="2019-01-23T15:03:39.421Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeanJs「 ES5 」-- DOM 模型">
<meta name="twitter:image" content="http://github.com/2018/01/27/LeanJSDOM模型/js.png">






  <link rel="canonical" href="http://github.com/2018/01/27/LeanJSDOM模型/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>LeanJs「 ES5 」-- DOM 模型 | Hutchins</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hutchins</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">To be interesting</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

  <a href="https://github.com/MLuminary" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/2018/01/27/LeanJSDOM模型/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hutchins">
      <meta itemprop="description" content="Never stop trying, finish and do everything you've started">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hutchins">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">LeanJs「 ES5 」-- DOM 模型

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-01-27 21:24:07" itemprop="dateCreated datePublished" datetime="2018-01-27T21:24:07+08:00">2018-01-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-23 23:03:39" itemprop="dateModified" datetime="2019-01-23T23:03:39+08:00">2019-01-23</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <a href="/2018/01/27/LeanJSDOM模型/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments: </span> <span class="post-comments-count valine-comment-count" data-xid="/2018/01/27/LeanJSDOM模型/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
            <span id="/2018/01/27/LeanJSDOM模型/" class="leancloud_visitors" data-flag-title="LeanJs「 ES5 」-- DOM 模型">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">Views: </span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">37k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">34 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/2018/01/27/LeanJSDOM模型/js.png" alt="Js"></p>
<a id="more"></a>
<h2 id="DOM模型概述"><a href="#DOM模型概述" class="headerlink" title="DOM模型概述"></a>DOM模型概述</h2><p>文档对象模型(Document Object Model)</p>
<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>DOM 的最小组成单位叫做节点，节点的类型有 7 种</p>
<ul>
<li><code>Document</code> : 整个文档数的顶层节点</li>
<li><code>DocumentType</code> : <code>doctype</code>标签</li>
<li><code>Element</code> : 网页的各种HTML标签</li>
<li><code>Attribute</code> : 网页元素的属性</li>
<li><code>Text</code> : 标签之间或标签包含的文本</li>
<li><code>Comment</code> : 注释</li>
<li><code>DocumentFragment</code> : 文档的片段</li>
</ul>
<p>这七种节点都属于浏览器原生提供的节点对象的派生对象，具有一些共同的属性和方法。</p>
<h3 id="特征相关属性"><a href="#特征相关属性" class="headerlink" title="特征相关属性"></a>特征相关属性</h3><p>所有节点对象都是浏览器内置 <code>Node</code> 对象的实例，继承了 <code>Node</code> 属性和方法。</p>
<p>可以用 <code>console.dir(Node)</code> 查看方法</p>
<h4 id="Node-nodeName-Node-nodeType"><a href="#Node-nodeName-Node-nodeType" class="headerlink" title="Node.nodeName Node.nodeType"></a>Node.nodeName Node.nodeType</h4><table>
<thead>
<tr>
<th>类型</th>
<th>nodeName</th>
<th>nodeType</th>
</tr>
</thead>
<tbody>
<tr>
<td>ELEMENT_NODE</td>
<td>大写的HTML元素名</td>
<td>1</td>
</tr>
<tr>
<td>ATTRIBUTE_NODE</td>
<td>等同于Attr.name</td>
<td>2</td>
</tr>
<tr>
<td>TEXT_NODE</td>
<td>#text</td>
<td>3</td>
</tr>
<tr>
<td>COMMENT_NODE</td>
<td>#comment</td>
<td>8</td>
</tr>
<tr>
<td>DOCUMENT_NODE</td>
<td>#document</td>
<td>9</td>
</tr>
<tr>
<td>DOCUMENT_FRAGMENT_NODE</td>
<td>#document-fragment</td>
<td>11</td>
</tr>
<tr>
<td>DOCUMENT_TYPE_NODE</td>
<td>等同于DocumentType.name</td>
<td>10</td>
</tr>
</tbody>
</table>
<h4 id="Node-nodeValue"><a href="#Node-nodeValue" class="headerlink" title="Node.nodeValue"></a>Node.nodeValue</h4><p>返回一个字符串，表示当前节点本身的文本值，该属性可读写</p>
<p>因为只有Text节点、Comment节点，XML文档的CDATA节点有文本值，因此只有这三类节点的 <code>nodeValue</code> 可以返回结果，其它类型的节点一律返回 <code>null</code> ，也无法设置 <code>nodeValue</code> 属性</p>
<h4 id="Node-textContent"><a href="#Node-textContent" class="headerlink" title="Node.textContent"></a>Node.textContent</h4><p><code>Node.textContent</code> 属性返回当前节点和他所有后代节点的文本内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>this<span class="tag">&lt;<span class="name">span</span>&gt;</span>is<span class="tag">&lt;/<span class="name">span</span>&gt;</span>some text<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).textContent</span><br><span class="line"><span class="comment">//this is some text</span></span><br></pre></td></tr></table></figure>
<p>该属性是可读写的，不过在这里要注意一点，他里面的内容会代替掉该元素其中的任何元素，而且是以文本的形式展示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).textContent = <span class="string">'&lt;p&gt;just a test&lt;/p&gt;'</span></span><br></pre></td></tr></table></figure>
<p>这里的<code>&lt;p&gt;&lt;/p&gt;</code>并不会自动识别成 <code>p</code> 标签，而是以文本的形式展现在页面上</p>
<p>如果要读取整个文档的内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.textContent</span><br></pre></td></tr></table></figure>
<h4 id="Node-baseURI"><a href="#Node-baseURI" class="headerlink" title="Node.baseURI"></a>Node.baseURI</h4><p>返回一个字符串，表示当前网页的绝对路径，如果无法获取，则返回 <code>null</code></p>
<p>不同节点都可以调用这个属性，一般返回的值是相同的</p>
<p>该属性的值一般由当前网址的URL决定，但是可以用HTML的 <code>&lt;base&gt;</code> 标签改变该属性的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;base href=<span class="string">"http://www.example.com/page.html"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>设置 <code>&lt;base&gt;</code> 以后，<code>baseURI</code> 属性就返回 <code>&lt;base&gt;</code> 标签设置的值</p>
<h4 id="Node-firstChild-Node-lastChild"><a href="#Node-firstChild-Node-lastChild" class="headerlink" title="Node.firstChild Node.lastChild"></a>Node.firstChild Node.lastChild</h4><p><code>firstChild</code> 属性返回当前节点的第一个子节点，如果当前节点没有子节点，则返回 <code>null</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"para-01"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>First span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">'para-01'</span>).firstChild.nodeName</span></span><br><span class="line"><span class="javascript">  ) <span class="comment">// "#text"</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，p元素与span元素之间有空白字符，这导致firstChild返回的是文本节点。</p>
<h3 id="节点对象的方法"><a href="#节点对象的方法" class="headerlink" title="节点对象的方法"></a>节点对象的方法</h3><h4 id="Node-appendChild"><a href="#Node-appendChild" class="headerlink" title="Node.appendChild()"></a>Node.appendChild()</h4><p><code>Node.appendChild</code> 方法接受一个节点对象作为参数，将其作为最后一个子节点，插入当前节点</p>
<h4 id="Node-hasChildNodes"><a href="#Node-hasChildNodes" class="headerlink" title="Node.hasChildNodes()"></a>Node.hasChildNodes()</h4><p><code>Node.hasChildNodes</code> 方法返回一个布尔值，表示当前节点是否有子节点。</p>
<h4 id="Node-cloneNode"><a href="#Node-cloneNode" class="headerlink" title="Node.cloneNode()"></a>Node.cloneNode()</h4><p><code>Node.cloneNode</code> 方法用于克隆一个节点。它接受一个布尔值作为参数，表示是否同时克隆子节点，默认是 <code>false</code> ，即不克隆子节点。</p>
<p>此克隆方法不会克隆绑定事件，并且如果被克隆的对象有 <code>id</code> 值的话，需要修改掉其中的一个</p>
<h4 id="Node-insertBefore"><a href="#Node-insertBefore" class="headerlink" title="Node.insertBefore()"></a>Node.insertBefore()</h4><p><code>insertBefore</code> 方法用于将某个节点插入当前节点内部的指定位置。它接受两个参数，第一个参数是所要插入的节点，第二个参数是当前节点内部的一个子节点，新的节点将插在这个子节点的前面。该方法返回被插入的新节点。</p>
<h4 id="Node-removeChild"><a href="#Node-removeChild" class="headerlink" title="Node.removeChild()"></a>Node.removeChild()</h4><p><code>Node.removeChild</code> 方法接受一个子节点作为参数，用于从当前节点移除该子节点。它返回被移除的子节点。</p>
<h4 id="Node-replaceChild"><a href="#Node-replaceChild" class="headerlink" title="Node.replaceChild()"></a>Node.replaceChild()</h4><p><code>Node.replaceChild</code> 方法用于将一个新的节点，替换当前节点的某一个子节点。它接受两个参数，第一个参数是用来替换的新节点，第二个参数将要被替换走的子节点。它返回被替换走的那个节点。</p>
<h4 id="Node-contains"><a href="#Node-contains" class="headerlink" title="Node.contains()"></a>Node.contains()</h4><p><code>Node.contains</code> 方法接受一个节点作为参数，返回一个布尔值，表示参数节点是否为当前节点的后代节点。</p>
<h4 id="Node-compareDocumentPosition"><a href="#Node-compareDocumentPosition" class="headerlink" title="Node.compareDocumentPosition()"></a>Node.compareDocumentPosition()</h4><p><code>compareDocumentPosition</code> 方法的用法，与 <code>contains</code> 方法完全一致，返回一个7个比特位的二进制值，表示参数节点与当前节点的关系。</p>
<h4 id="Node-isEqualNode"><a href="#Node-isEqualNode" class="headerlink" title="Node.isEqualNode()"></a>Node.isEqualNode()</h4><p><code>isEqualNode</code> 方法返回一个布尔值，用于检查两个节点是否相等。所谓相等的节点，指的是两个节点的类型相同、属性相同、子节点相同。</p>
<h4 id="Node-normalize"><a href="#Node-normalize" class="headerlink" title="Node.normalize()"></a>Node.normalize()</h4><p><code>normailize</code> 方法用于清理当前节点内部的所有Text节点。它会去除空的文本节点，并且将毗邻的文本节点合并成一个。</p>
<h3 id="节点的集合对象"><a href="#节点的集合对象" class="headerlink" title="节点的集合对象"></a>节点的集合对象</h3><h4 id="NodeList-对象"><a href="#NodeList-对象" class="headerlink" title="NodeList 对象"></a>NodeList 对象</h4><p><code>NodeList</code> 实例对象是一个类似数组的对象，它的成员是节点对象。节点数的变化会改变对应的 <code>NodeList</code> ，因为是类数组，它不能直接调用数组的一些方法。</p>
<h4 id="HTMLCollection-对象"><a href="#HTMLCollection-对象" class="headerlink" title="HTMLCollection 对象"></a>HTMLCollection 对象</h4><p><code>HTMLCollection</code> 实例对象与 <code>NodeList</code> 实例对象类似，也是节点的集合，返回一个类似数组的对象。 <code>document.links</code> 、 <code>docuement.forms</code> 、 <code>document.images</code> 等属性，返回的都是 <code>HTMLCollection</code> 实例对象。</p>
<p><code>HTMLCollection</code> 与 <code>NodeList</code> 的区别有以下几点。</p>
<ol>
<li><code>HTMLCollection</code> 实例对象的成员只能是 <code>Element</code> 节点，<code>NodeList</code> 实例对象的成员可以包含其他节点。</li>
</ol>
<p>2.<code>HTMLCollection</code> 实例对象都是动态集合，节点的变化会实时反映在集合中。<code>NodeList</code> 实例对象可以是静态集合。</p>
<ol start="3">
<li><code>HTMLCollection</code> 实例对象可以用 <code>id</code> 属性或 <code>name</code> 属性引用节点元素， <code>NodeList</code> 只能使用数字索引引用。</li>
</ol>
<h3 id="ParentNode-接口，ChildNode-接口"><a href="#ParentNode-接口，ChildNode-接口" class="headerlink" title="ParentNode 接口，ChildNode 接口"></a>ParentNode 接口，ChildNode 接口</h3><p>不同的节点除了继承 <code>Node</code> 接口以外，还会继承其他接口。<code>ParentNode</code> 接口用于获取当前节点的 <code>Element</code> 子节点， <code>ChildNode</code> 接口用于处理当前节点的子节点（包含但不限于 <code>Element</code> 子节点）。</p>
<h4 id="ParentNode接口"><a href="#ParentNode接口" class="headerlink" title="ParentNode接口"></a>ParentNode接口</h4><p><code>ParentNode</code> 接口用于获取 <code>Element</code> 子节点。<code>Element</code> 节点、<code>Document</code> 节点和 <code>DocumentFragment</code> 节点，部署了 <code>ParentNode</code> 接口。凡是这三类节点，都具有以下四个属性，用于获取Element子节点。</p>
<p>children</p>
<p><code>children</code> 属性返回一个动态的 <code>HTMLCollection</code> 集合，由当前节点的所有 <code>Element</code> 子节点组成。</p>
<p>firstElementChild</p>
<p><code>firstElementChild</code> 属性返回当前节点的第一个 <code>Element</code> 子节点，如果不存在任何  <code>Element</code>子节点，则返回 <code>null</code> 。</p>
<p>lastElementChild</p>
<p><code>lastElementChild</code> 属性返回当前节点的最后一个 <code>Element</code> 子节点，如果不存在任何 <code>Element</code> 子节点，则返回 <code>null</code>。</p>
<p>childElementCount</p>
<p><code>childElementCount</code> 属性返回当前节点的所有 <code>Element</code> 子节点的数目。</p>
<h4 id="ChildNode-接口"><a href="#ChildNode-接口" class="headerlink" title="ChildNode 接口"></a>ChildNode 接口</h4><p><code>ChildNode</code> 接口用于处理子节点（包含但不限于 <code>Element</code> 子节点）。<code>Element</code> 节点、<code>DocumentType</code> 节点和 <code>CharacterData</code> 接口，部署了 <code>ChildNode</code> 接口。凡是这三类节点（接口），都可以使用下面四个方法。</p>
<p>remove()</p>
<p><code>remove</code> 方法用于移除当前节点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.remove()</span><br></pre></td></tr></table></figure>
<p>上面方法在DOM中移除了 <code>el</code> 节点。注意，调用这个方法的节点，是被移除的节点本身，而不是它的父节点。</p>
<p>before()</p>
<p><code>before</code> 方法用于在当前节点的前面，插入一个同级节点。如果参数是节点对象，插入DOM的就是该节点对象；如果参数是文本，插入DOM的就是参数对应的文本节点。</p>
<p>after()</p>
<p><code>after</code> 方法用于在当前节点的后面，插入一个同级节点。如果参数是节点对象，插入DOM的就是该节点对象；如果参数是文本，插入DOM的就是参数对应的文本节点。</p>
<p>replaceWith()</p>
<p><code>replaceWith</code> 方法使用参数指定的节点，替换当前节点。如果参数是节点对象，替换当前节点的就是该节点对象；如果参数是文本，替换当前节点的就是参数对应的文本节点。</p>
<h2 id="Document-节点"><a href="#Document-节点" class="headerlink" title="Document 节点"></a>Document 节点</h2><h3 id="内部属性节点"><a href="#内部属性节点" class="headerlink" title="内部属性节点"></a>内部属性节点</h3><h4 id="document-doctype"><a href="#document-doctype" class="headerlink" title="document.doctype"></a>document.doctype</h4><p><code>document</code> 对象的第一个子节点，包含了文档类型，通常 <code>document.firstChild</code> 返回这个节点</p>
<h4 id="document-documentElement"><a href="#document-documentElement" class="headerlink" title="document.documentElement"></a>document.documentElement</h4><p><code>document</code> 对象的第二个子节点，对于HTML网页，返回 <code>&lt;html&gt;</code> 节点 </p>
<h4 id="document-defaultView"><a href="#document-defaultView" class="headerlink" title="document.defaultView"></a>document.defaultView</h4><p>在浏览器中返回 <code>document</code> 对象所在的 <code>window</code> 对象，否则返回 <code>null</code></p>
<h4 id="document-body-document-head"><a href="#document-body-document-head" class="headerlink" title="document.body,document.head"></a>document.body,document.head</h4><p>document.head属性返回当前文档的 <code>&lt;head&gt;</code> 节点，<code>document.body</code> 属性返回当前文档的 <code>&lt;body&gt;</code>。</p>
<h4 id="document-activeElement"><a href="#document-activeElement" class="headerlink" title="document.activeElement"></a>document.activeElement</h4><p><code>document.activeElement</code> 属性返回当前文档中获得焦点的那个元素。用户通常可以使用Tab键移动焦点，使用空格键激活焦点。比如，如果焦点在一个链接上，此时按一下空格键，就会跳转到该链接。</p>
<h3 id="节点集合属性"><a href="#节点集合属性" class="headerlink" title="节点集合属性"></a>节点集合属性</h3><h4 id="document-links，document-forms，document-images，document-embeds"><a href="#document-links，document-forms，document-images，document-embeds" class="headerlink" title="document.links，document.forms，document.images，document.embeds"></a>document.links，document.forms，document.images，document.embeds</h4><p><code>document.links</code> 属性返回当前文档所有设定了 <code>href</code> 属性的 <code>a</code> 及 <code>area</code> 元素。</p>
<p><code>document.forms</code> 属性返回页面中所有表单元素 <code>form</code>。</p>
<p><code>document.images</code> 属性返回页面所有图片元素（即 <code>img</code> 标签）。</p>
<p><code>document.embeds</code> 属性返回网页中所有嵌入对象，即 <code>embed</code> 标签。</p>
<p>以上四个属性返回的都是 <code>HTMLCollection</code> 对象实例</p>
<h4 id="document-scripts，document-styleSheets"><a href="#document-scripts，document-styleSheets" class="headerlink" title="document.scripts，document.styleSheets"></a>document.scripts，document.styleSheets</h4><p><code>document.scripts</code> 属性返回当前文档的所有脚本（即 <code>script</code> 标签）。</p>
<p><code>document.scripts</code>返回的也是 <code>HTMLCollection</code> 实例。</p>
<p><code>document.styleSheets</code> 属性返回一个类似数组的对象，代表当前网页的所有样式表。每个样式表对象都有 <code>cssRules</code> 属性，返回该样式表的所有CSS规则，这样这可以操作具体的CSS规则了。</p>
<h3 id="文档信息属性"><a href="#文档信息属性" class="headerlink" title="文档信息属性"></a>文档信息属性</h3><h4 id="document-documentURI，document-URL"><a href="#document-documentURI，document-URL" class="headerlink" title="document.documentURI，document.URL"></a>document.documentURI，document.URL</h4><p><code>document.documentURI</code> 属性和 <code>document.URL</code> 属性都返回一个字符串，表示当前文档的网址。不同之处是 <code>documentURI</code> 属性可用于所有文档（包括 XML 文档），<code>URL</code> 属性只能用于 <code>HTML</code> 文档。</p>
<h4 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h4><p><code>document.domain</code> 属性返回当前文档的域名。比如，某张网页的网址是 <a href="http://www.example.com/hello.html" target="_blank" rel="noopener">http://www.example.com/hello.html</a> ，<code>domain</code> 属性就等于 <code>www.example.com</code>。如果无法获取域名，该属性返回 <code>null</code>。</p>
<h4 id="document-lastModified"><a href="#document-lastModified" class="headerlink" title="document.lastModified"></a>document.lastModified</h4><p><code>document.lastModified</code> 属性返回当前文档最后修改的时间戳，格式为字符串。</p>
<p>注意，<code>lastModified</code> 属性的值是字符串，所以不能用来直接比较，两个文档谁的日期更新，需要用 <code>Date.parse</code> 方法转成时间戳格式，才能进行比较。</p>
<h4 id="document-location"><a href="#document-location" class="headerlink" title="document.location"></a>document.location</h4><p>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当前网址为 http://user:passwd@www.example.com:4097/path/a.html?x=111#part1</span></span><br><span class="line"><span class="built_in">document</span>.location.href <span class="comment">// "http://user:passwd@www.example.com:4097/path/a.html?x=111#part1"</span></span><br><span class="line"><span class="built_in">document</span>.location.protocol <span class="comment">// "http:"</span></span><br><span class="line"><span class="built_in">document</span>.location.host <span class="comment">// "www.example.com:4097"</span></span><br><span class="line"><span class="built_in">document</span>.location.hostname <span class="comment">// "www.example.com"</span></span><br><span class="line"><span class="built_in">document</span>.location.port <span class="comment">// "4097"</span></span><br><span class="line"><span class="built_in">document</span>.location.pathname <span class="comment">// "/path/a.html"</span></span><br><span class="line"><span class="built_in">document</span>.location.search <span class="comment">// "?x=111"</span></span><br><span class="line"><span class="built_in">document</span>.location.hash <span class="comment">// "#part1"</span></span><br><span class="line"><span class="built_in">document</span>.location.user <span class="comment">// "user"</span></span><br><span class="line"><span class="built_in">document</span>.location.password <span class="comment">// "passwd"</span></span><br></pre></td></tr></table></figure>
<p>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 跳转到另一个网址</span></span><br><span class="line"><span class="built_in">document</span>.location.assign(<span class="string">'http://www.google.com'</span>)</span><br><span class="line"><span class="comment">// 优先从服务器重新加载</span></span><br><span class="line"><span class="built_in">document</span>.location.reload(<span class="literal">true</span>)</span><br><span class="line"><span class="comment">// 优先从本地缓存重新加载（默认值）</span></span><br><span class="line"><span class="built_in">document</span>.location.reload(<span class="literal">false</span>)</span><br><span class="line"><span class="comment">// 跳转到新网址，并将取代掉history对象中的当前记录</span></span><br><span class="line"><span class="built_in">document</span>.location.replace(<span class="string">'http://www.google.com'</span>);</span><br><span class="line"><span class="comment">// 将location对象转为字符串，等价于document.location.href</span></span><br><span class="line"><span class="built_in">document</span>.location.toString()</span><br></pre></td></tr></table></figure>
<h4 id="document-referrer，document-title，document-characterSet"><a href="#document-referrer，document-title，document-characterSet" class="headerlink" title="document.referrer，document.title，document.characterSet"></a>document.referrer，document.title，document.characterSet</h4><p><code>document.referrer</code> 属性返回一个字符串，表示当前文档的访问来源，如果是无法获取来源或是用户直接键入网址，而不是从其他网页点击，则返回一个空字符串。</p>
<p><code>document.referrer</code> 的值，总是与HTTP头信息的 <code>Referer</code> 保持一致，但是它的拼写有两个 <code>r</code> 。</p>
<p><code>document.title</code> 属性返回当前文档的标题，该属性是可写的。</p>
<h4 id="document-readyState"><a href="#document-readyState" class="headerlink" title="document.readyState"></a>document.readyState</h4><p><code>document.readyState</code> 属性返回当前文档的状态，共有三种可能的值。</p>
<ul>
<li><code>loading</code>：加载HTML代码阶段（尚未完成解析）</li>
<li><code>interactive</code>：加载外部资源阶段时</li>
<li><code>complete</code>：加载完成时</li>
</ul>
<h4 id="document-designMode"><a href="#document-designMode" class="headerlink" title="document.designMode"></a>document.designMode</h4><p><code>document.designMode</code> 属性控制当前文档是否可编辑，通常用在制作所见即所得编辑器。打开 <code>iframe</code> 元素包含的文档的 <code>designMode</code> 属性，就能将其变为一个所见即所得的编辑器。</p>
<h4 id="document-implementation"><a href="#document-implementation" class="headerlink" title="document.implementation"></a>document.implementation</h4><p><code>document.implementation</code> 属性返回一个对象，用来甄别当前环境部署了哪些DOM相关接口。<code>implementation</code> 属性的 <code>hasFeature</code> 方法，可以判断当前环境是否部署了特定版本的特定接口。</p>
<h4 id="document-compatMode"><a href="#document-compatMode" class="headerlink" title="document.compatMode"></a>document.compatMode</h4><p><code>compatMode</code>属性返回浏览器处理文档的模式，可能的值为<code>BackCompat</code>（向后兼容模式）和<code>CSS1Compat</code>（严格模式）。</p>
<p>一般来说，如果网页代码的第一行设置了明确的<code>DOCTYPE</code>（比如<code>&lt;!doctype html&gt;</code>），<code>document.compatMode</code>的值都为<code>CSS1Compat</code>。</p>
<h4 id="document-cookie"><a href="#document-cookie" class="headerlink" title="document.cookie"></a>document.cookie</h4><p>操作浏览器的Cookie</p>
<h3 id="读写相关的方法"><a href="#读写相关的方法" class="headerlink" title="读写相关的方法"></a>读写相关的方法</h3><h4 id="document-write-，document-writeln"><a href="#document-write-，document-writeln" class="headerlink" title="document.write()，document.writeln()"></a>document.write()，document.writeln()</h4><p>如果页面已经解析完成（<code>DOMContentLoaded</code>事件发生之后），再调用<code>write</code>方法，它会先调用<code>open</code>方法，擦除当前文档所有内容，然后再写入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">'&lt;p&gt;Hello World!&lt;/p&gt;'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.open();</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">'&lt;p&gt;Hello World!&lt;/p&gt;'</span>);</span><br><span class="line">  <span class="built_in">document</span>.close();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>document.writeln</code> 方法与 <code>write</code> 方法完全一致，除了会在输出内容的尾部添加换行符。</p>
<h3 id="查找节点的方法"><a href="#查找节点的方法" class="headerlink" title="查找节点的方法"></a>查找节点的方法</h3><h4 id="document-querySelector-，document-querySelectorAll"><a href="#document-querySelector-，document-querySelectorAll" class="headerlink" title="document.querySelector()，document.querySelectorAll()"></a>document.querySelector()，document.querySelectorAll()</h4><p><code>document.querySelector</code> 方法接受一个CSS选择器作为参数，返回匹配该选择器的元素节点。如果有多个节点满足匹配条件，则返回第一个匹配的节点。如果没有发现匹配的节点，则返回 <code>null</code>。</p>
<p><code>document.querySelectorAll</code> 方法与 <code>querySelector</code> 用法类似，区别是返回一个 <code>NodeList</code> 对象，包含所有匹配给定选择器的节点。</p>
<p>支持复杂的CSS选择器，但是不支持伪元素的选择器</p>
<h4 id="document-getElementsByTagName"><a href="#document-getElementsByTagName" class="headerlink" title="document.getElementsByTagName()"></a>document.getElementsByTagName()</h4><p><code>document.getElementsByTagName</code> 方法返回所有指定HTML标签的元素，返回值是一个类似数组的 <code>HTMLCollection</code> 对象，可以实时反映HTML文档的变化。如果没有任何匹配的元素，就返回一个空集。</p>
<h4 id="document-getElementsByClassName"><a href="#document-getElementsByClassName" class="headerlink" title="document.getElementsByClassName()"></a>document.getElementsByClassName()</h4><p><code>document.getElementsByClassName</code> 方法返回一个类似数组的对象（HTMLCollection实例对象），包括了所有 <code>class</code> 名字符合指定条件的元素，元素的变化实时反映在返回结果中。</p>
<h4 id="document-getElementsByName"><a href="#document-getElementsByName" class="headerlink" title="document.getElementsByName()"></a>document.getElementsByName()</h4><p><code>document.getElementsByName</code> 方法用于选择拥有 <code>name</code> 属性的HTML元素（比如<code>&lt;form&gt;</code>、<code>&lt;radio&gt;</code>、<code>&lt;img&gt;</code>、<code>&lt;frame&gt;</code>、<code>&lt;embed&gt;</code>和<code>&lt;object&gt;</code>等），返回一个类似数组的的对象（<code>NodeList</code>对象的实例），因为<code>name</code>属性相同的元素可能不止一个。</p>
<h4 id="getElementById"><a href="#getElementById" class="headerlink" title="getElementById()"></a>getElementById()</h4><p><code>getElementById</code> 方法返回匹配指定 <code>id</code> 属性的元素节点。如果没有发现匹配的节点，则返回 <code>null</code>。</p>
<h4 id="document-elementFromPoint"><a href="#document-elementFromPoint" class="headerlink" title="document.elementFromPoint()"></a>document.elementFromPoint()</h4><p><code>document.elementFromPoint</code> 方法返回位于页面指定位置最上层的 <code>Element</code> 子节点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.elementFromPoint(<span class="number">50</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure>
<p>上面代码选中在 <code>(50, 50)</code> 这个坐标位置的最上层的那个HTML元素。</p>
<p><code>elementFromPoint</code> 方法的两个参数，依次是相对于当前视口左上角的横坐标和纵坐标，单位是像素。如果位于该位置的HTML元素不可返回（比如文本框的滚动条），则返回它的父元素（比如文本框）。如果坐标值无意义（比如负值或超过视口大小），则返回 <code>null</code>。</p>
<h3 id="生成节点的方法"><a href="#生成节点的方法" class="headerlink" title="生成节点的方法"></a>生成节点的方法</h3><h4 id="document-createElement"><a href="#document-createElement" class="headerlink" title="document.createElement()"></a>document.createElement()</h4><p><code>document.createElement</code> 方法用来生成网页元素节点。</p>
<h4 id="document-createTextNode"><a href="#document-createTextNode" class="headerlink" title="document.createTextNode()"></a>document.createTextNode()</h4><p><code>document.createTextNode</code> 方法用来生成文本节点，参数为所要生成的文本节点的内容。</p>
<p>这个方法可以确保返回的节点，被浏览器当作文本渲染，而不是当作 HTML 代码渲染。因此，可以用来展示用户的输入，避免 XSS 攻击。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">div.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">'&lt;span&gt;Foo &amp; bar&lt;/span&gt;'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(div.innerHTML)</span><br><span class="line"><span class="comment">// &amp;lt;span&amp;gt;Foo &amp;amp; bar&amp;lt;/span&amp;gt;</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>createTextNode</code> 方法对大于号和小于号进行转义，从而保证即使用户输入的内容包含恶意代码，也能正确显示。</p>
<p><code>createTextNode</code> 方法不转义双引号</p>
<h4 id="document-createAttribute"><a href="#document-createAttribute" class="headerlink" title="document.createAttribute()"></a>document.createAttribute()</h4><p><code>document.createAttribute</code> 方法生成一个新的属性对象节点，并返回它。</p>
<p>参数是这个属性的名称</p>
<h4 id="document-createDocumentFragment"><a href="#document-createDocumentFragment" class="headerlink" title="document.createDocumentFragment()"></a>document.createDocumentFragment()</h4><p><code>createDocumentFragment</code> 方法生成一个DocumentFragment对象。</p>
<p><code>DocumentFragment</code>对象是一个存在于内存的DOM片段，但是不属于当前文档，常常用来生成较复杂的DOM结构，然后插入当前文档。这样做的好处在于，因为<strong><code>DocumentFragment</code> 不属于当前文档，对它的任何改动，都不会引发网页的重新渲染，比直接修改当前文档的DOM有更好的性能表现</strong>。</p>
<h3 id="事件相关的方法"><a href="#事件相关的方法" class="headerlink" title="事件相关的方法"></a>事件相关的方法</h3><h4 id="document-createEvent"><a href="#document-createEvent" class="headerlink" title="document.createEvent()"></a>document.createEvent()</h4><p><code>document.createEvent</code> 方法生成一个事件对象，该对象可以被 <code>element.dispatchEvent</code> 方法使用，触发指定事件。</p>
<h4 id="document-addEventListener-，document-removeEventListener-，document-dispatchEvent"><a href="#document-addEventListener-，document-removeEventListener-，document-dispatchEvent" class="headerlink" title="document.addEventListener()，document.removeEventListener()，document.dispatchEvent()"></a>document.addEventListener()，document.removeEventListener()，document.dispatchEvent()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加事件监听函数</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, listener, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除事件监听函数</span></span><br><span class="line"><span class="built_in">document</span>.removeEventListener(<span class="string">'click'</span>, listener, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发事件</span></span><br><span class="line"><span class="keyword">var</span> event = <span class="keyword">new</span> Event(<span class="string">'click'</span>);</span><br><span class="line"><span class="built_in">document</span>.dispatchEvent(event);</span><br></pre></td></tr></table></figure>
<h3 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h3><h4 id="document-hasFocus"><a href="#document-hasFocus" class="headerlink" title="document.hasFocus()"></a>document.hasFocus()</h4><p><code>document.hasFocus</code> 方法返回一个布尔值，表示当前文档之中是否有元素被激活或获得焦点。</p>
<h4 id="document-createNodeIterator-，document-createTreeWalker"><a href="#document-createNodeIterator-，document-createTreeWalker" class="headerlink" title="document.createNodeIterator()，document.createTreeWalker()"></a>document.createNodeIterator()，document.createTreeWalker()</h4><p><code>document.createNodeIterator</code> 方法返回一个DOM的子节点遍历器。</p>
<p><code>document.createTreeWalker</code> 方法返回一个DOM的子树遍历器。它与<code>createNodeIterator</code> 方法的区别在于，后者只遍历子节点，而它遍历整个子树。</p>
<h4 id="document-adoptNode"><a href="#document-adoptNode" class="headerlink" title="document.adoptNode()"></a>document.adoptNode()</h4><p><code>document.adoptNode</code> 方法将某个节点，从其原来所在的文档移除，插入当前文档，并返回插入后的新节点。</p>
<h4 id="document-importNode"><a href="#document-importNode" class="headerlink" title="document.importNode()"></a>document.importNode()</h4><p><code>document.importNode</code> 方法从外部文档拷贝指定节点，插入当前文档。</p>
<h2 id="Element-节点"><a href="#Element-节点" class="headerlink" title="Element 节点"></a>Element 节点</h2><h3 id="特征相关的属性"><a href="#特征相关的属性" class="headerlink" title="特征相关的属性"></a>特征相关的属性</h3><h4 id="Element-attributes"><a href="#Element-attributes" class="headerlink" title="Element.attributes"></a>Element.attributes</h4><p><code>Element.attributes</code> 属性返回一个类似数组的对象，成员是当前元素节点的所有属性节点</p>
<h4 id="Element-id，Element-tagName"><a href="#Element-id，Element-tagName" class="headerlink" title="Element.id，Element.tagName"></a>Element.id，Element.tagName</h4><p><code>Element.id</code> 属性返回指定元素的 <code>id</code> 属性，该属性可读写</p>
<p><code>Element.tagName</code> 属性返回指定元素的大写标签名，与 <code>nodeName</code> 属性的值相等。</p>
<h4 id="Element-innerHTML"><a href="#Element-innerHTML" class="headerlink" title="Element.innerHTML"></a>Element.innerHTML</h4><p><code>Element.innerHTML</code>属性返回该元素包含的 HTML 代码。该属性可读写，常用来设置某个节点的内容。</p>
<p><strong>注意</strong></p>
<p>如果文本节点中包含&amp;、小于号和大于号，<code>innerHTML</code> 属性会将它们转为实体形式 <code>&amp;amp;</code> 、 <code>&amp;lt;</code> 、 <code>&amp;gt;</code>。</p>
<p>如果文本中含有 <code>&lt;script&gt;</code> 标签，虽然可以生成 <code>script</code> 节点，但是插入的代码不会执行，但是 <code>innerHTML</code> 还是有安全风险</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"&lt;img src=x onerror=alert(1)&gt;"</span>;</span><br><span class="line">el.innerHTML = name;</span><br></pre></td></tr></table></figure>
<p>上面代码中 <code>alert</code> 还是会执行的，因此为了安全考虑，如果插入的是文本，最好用 <code>textContent</code> 属性代替 <code>innerHTML</code></p>
<h4 id="Element-outerHTML"><a href="#Element-outerHTML" class="headerlink" title="Element.outerHTML"></a>Element.outerHTML</h4><p><code>Element.outerHTML</code> 属性返回一个字符串，内容为指定元素节点的所有 HTML 代码，包括它自身和包含的所有子元素。</p>
<p><code>outerHTML</code> 属性是可读写的，对它进行赋值，等于替换掉当前元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HTML代码如下</span></span><br><span class="line"><span class="comment">// &lt;div id="container"&gt;&lt;div id="d"&gt;Hello&lt;/div&gt;&lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span><br><span class="line">d = <span class="built_in">document</span>.getElementById(<span class="string">"d"</span>);</span><br><span class="line">container.firstChild.nodeName <span class="comment">// "DIV"</span></span><br><span class="line">d.nodeName <span class="comment">// "DIV"</span></span><br><span class="line"></span><br><span class="line">d.outerHTML = <span class="string">'&lt;p&gt;Hello&lt;/p&gt;'</span>;</span><br><span class="line">container.firstChild.nodeName <span class="comment">// "P"</span></span><br><span class="line">d.nodeName <span class="comment">// "DIV"</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<code>outerHTML</code> 属性重新赋值以后，内层的 <code>div</code> 元素就不存在了，被 <code>p</code> 元素替换了。但是，变量 <code>d</code> 依然指向原来的 <code>div</code> 元素，这表示被替换的 <code>DIV</code> 元素还存在于内存中。</p>
<h4 id="Element-className-Element-classList"><a href="#Element-className-Element-classList" class="headerlink" title="Element.className , Element.classList"></a>Element.className , Element.classList</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one two three"</span> <span class="attr">id</span>=<span class="string">"myDiv"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面代码的 <code>className</code> 属性和 <code>classList</code> 属性如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>).className</span><br><span class="line"><span class="comment">//'one two three'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>).classList</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   0: "one"</span></span><br><span class="line"><span class="comment">//   1: "two"</span></span><br><span class="line"><span class="comment">//   2: "three"</span></span><br><span class="line"><span class="comment">//   length: 3</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<p>classList 对象有下列几种方法</p>
<ul>
<li><code>add()</code> : 增加一个class</li>
<li><code>remove()</code> : 移除一个class</li>
<li><code>contains()</code> : 检查当前元素是否包含某个class</li>
<li><code>toggle()</code> : 将某个class移入或移出元素（如果存在就移除，不存在就添加）</li>
<li><code>item()</code> : 返回指定索引位置的class</li>
<li><code>toString()</code> : 将class的列表转为字符串</li>
</ul>
<h3 id="盒装模型相关属性"><a href="#盒装模型相关属性" class="headerlink" title="盒装模型相关属性"></a>盒装模型相关属性</h3><h4 id="Element-clientHeight-Element-clientWidth"><a href="#Element-clientHeight-Element-clientWidth" class="headerlink" title="Element.clientHeight,Element.clientWidth"></a>Element.clientHeight,Element.clientWidth</h4><p>返回元素节点可见部分的高度，不包括溢出(overflow)的大小</p>
<p>这两个属性的值等元素的css高度（宽度）加上css的padding减去滚动条（如果存在滚动条），单位为像素。</p>
<h4 id="Element-clientLeft-Element-clientTop"><a href="#Element-clientLeft-Element-clientTop" class="headerlink" title="Element.clientLeft,Element.clientTop"></a>Element.clientLeft,Element.clientTop</h4><p><code>Element.clientLeft</code> 属性等于元素节点左边框的宽度，<code>Element.clientTop</code> 属性等于元素节点顶部边框的宽度，单位为像素</p>
<p>如果元素设置了 <code>display:inline</code> 它的 <code>clientLeft</code> 属性一律为 <code>0</code></p>
<h4 id="Element-scrollLeft-Element-scrollTop"><a href="#Element-scrollLeft-Element-scrollTop" class="headerlink" title="Element.scrollLeft,Element.scrollTop"></a>Element.scrollLeft,Element.scrollTop</h4><p><code>Element.scrollLeft</code>属性表示网页元素的水平滚动条向右侧滚动的像素，<code>Element.scrollTop</code>属性表示网页元素的垂直滚动条向下滚动的像素数量，对于没有滚动条的网页元素，这两个属性总是等于0</p>
<p>如果要查看整张网页的水平的垂直的滚动距离，要从<code>document.documentElement</code> 元素上读取</p>
<h4 id="Element-scrollWidth-Element-scrollHeight"><a href="#Element-scrollWidth-Element-scrollHeight" class="headerlink" title="Element.scrollWidth,Element.scrollHeight"></a>Element.scrollWidth,Element.scrollHeight</h4><p><code>Element.scrollHeight</code> 属性返回某个网页元素的总高度，<code>Element.scrollWidth</code> 属性返回总宽度，可以理解成元素在垂直和水平两个方向上可以滚动的距离。它们都包括由于溢出容器而无法显示在网页上的那部分高度或宽度。这两个属性是只读属性。</p>
<p>如果内容正好适合它的容器，没有溢出，那么 <code>Element.scrollHeight</code> 和 <code>Element.clientHeight</code> 是相等的，如果存在溢出，那么 <code>scrollHeight</code> 属性大于<code>clientHeight</code> 属性，宽度也是同样。</p>
<p>当存在溢出的时候，滚动条滚动到内容底部时，下列表达式为  <code>true</code> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.scrollHeight - element.scrollTop === element.clientHeight</span><br></pre></td></tr></table></figure>
<h4 id="Element-offsetHeight-Element-offsetWidth"><a href="#Element-offsetHeight-Element-offsetWidth" class="headerlink" title="Element.offsetHeight , Element.offsetWidth"></a>Element.offsetHeight , Element.offsetWidth</h4><p><code>Element.offsetHeight</code> 属性返回元素的垂直高度，<code>Element.offsetWidth</code> 属性返回水平宽度。<code>offsetHeight</code> 可以理解成元素左下角距离左上角的位移，<code>offsetWidth</code> 是元素右上角距离左上角的位移。它们的单位为像素，都是只读。</p>
<p>这两个属性值包括 <code>Padding</code> 和 <code>Border</code> 、以及滚动条。这也意味着，如果不存在内容溢出，<code>Element.offsetHeight</code> 只比 <code>Element.clientHeight</code> 多了边框的高度。</p>
<h4 id="Element-offsetLeft，Element-offsetTop"><a href="#Element-offsetLeft，Element-offsetTop" class="headerlink" title="Element.offsetLeft，Element.offsetTop"></a>Element.offsetLeft，Element.offsetTop</h4><p><code>Element.offsetLeft</code> 返回当前元素左上角相对于 <code>Element.offsetParent</code> 节点的水平位移，<code>Element.offsetTop</code> 返回垂直位移，单位为像素。通常，这两个值是指相对于父节点的位移。</p>
<h3 id="相关节点的属性"><a href="#相关节点的属性" class="headerlink" title="相关节点的属性"></a>相关节点的属性</h3><h4 id="Element-children，Element-childElementCount"><a href="#Element-children，Element-childElementCount" class="headerlink" title="Element.children，Element.childElementCount"></a>Element.children，Element.childElementCount</h4><p><code>Element.children</code> 属性返回一个 <code>HTMLCollection</code> 对象，包括当前元素节点的所有子元素</p>
<p>这个属性与 <code>Node.childNodes</code> 属性的区别是，它只包括HTML元素类型的子节点，不包括其他类型的子节点。</p>
<p><code>Element.childElementCount</code> 属性返回当前元素节点包含的子HTML元素节点的个数，与<code>Element.children.length</code> 的值相同。注意，该属性只计算HTML元素类型的子节点。</p>
<h4 id="Element-firstElementChild，Element-lastElementChild"><a href="#Element-firstElementChild，Element-lastElementChild" class="headerlink" title="Element.firstElementChild，Element.lastElementChild"></a>Element.firstElementChild，Element.lastElementChild</h4><p><code>Element.firstElementChild</code> 属性返回第一个HTML元素类型的子节点，<code>Element.lastElementChild</code> 返回最后一个HTML元素类型的子节点</p>
<h4 id="Element-nextElementSibling，Element-previousElementSibling"><a href="#Element-nextElementSibling，Element-previousElementSibling" class="headerlink" title="Element.nextElementSibling，Element.previousElementSibling"></a>Element.nextElementSibling，Element.previousElementSibling</h4><p><code>Element.nextElementSibling</code> 属性返回当前HTML元素节点的后一个同级HTML元素节点</p>
<p><code>Element.previousElementSibling</code> 属性返回当前HTML元素节点的前一个同级HTML元素节点</p>
<h4 id="Element-offsetParent"><a href="#Element-offsetParent" class="headerlink" title="Element.offsetParent"></a>Element.offsetParent</h4><p><code>Element.offsetParent</code> 属性返回当前 HTML 元素的最靠近的、并且 CSS 的 <code>position</code> 属性不等于 <code>static</code> 的上层元素</p>
<p>如果该元素是不可见的（<code>display</code>属性为<code>none</code>），或者位置是固定的（<code>position</code>属性为<code>fixed</code>），则<code>offsetParent</code>属性返回<code>null</code>。</p>
<h3 id="属性相关的方法"><a href="#属性相关的方法" class="headerlink" title="属性相关的方法"></a>属性相关的方法</h3><ul>
<li><code>Element.getAttribute()</code>：读取指定属性</li>
<li><code>Element.setAttribute()</code>：设置指定属性</li>
<li><code>Element.hasAttribute()</code>：返回一个布尔值，表示当前元素节点是否有指定的属性</li>
<li><code>Element.removeAttribute()</code>：移除指定属性</li>
</ul>
<h3 id="查找相关方法"><a href="#查找相关方法" class="headerlink" title="查找相关方法"></a>查找相关方法</h3><ul>
<li><code>Element.querySelector()</code></li>
<li><code>Element.querySelectorAll()</code></li>
<li><code>Element.getElementsByTagName()</code></li>
<li><code>Element.getElementsByClassName()</code></li>
</ul>
<h3 id="事件相关的方法-1"><a href="#事件相关的方法-1" class="headerlink" title="事件相关的方法"></a>事件相关的方法</h3><ul>
<li><code>Element.addEventListener()</code> ：添加事件的回调函数</li>
<li><code>Element.removeEventListener()</code> ：移除事件监听函数</li>
<li><code>Element.dispatchEvent()</code> ：触发事件</li>
</ul>
<h3 id="其他方法-1"><a href="#其他方法-1" class="headerlink" title="其他方法"></a>其他方法</h3><h4 id="Element-scrollIntoView"><a href="#Element-scrollIntoView" class="headerlink" title="Element.scrollIntoView()"></a>Element.scrollIntoView()</h4><p><code>Element.scrollIntoView</code> 方法滚动当前元素，进入浏览器的可见区域，类似于设置<code>window.location.hash</code> 的效果。</p>
<h4 id="Element-getBoundingClientRect"><a href="#Element-getBoundingClientRect" class="headerlink" title="Element.getBoundingClientRect()"></a>Element.getBoundingClientRect()</h4><p><code>Element.getBoundingClientRect</code> 方法返回一个对象，该对象提供当前元素节点的大小、位置等信息，基本上就是CSS盒状模型提供的所有信息。</p>
<h4 id="Element-getClientRects"><a href="#Element-getClientRects" class="headerlink" title="Element.getClientRects()"></a>Element.getClientRects()</h4><p><code>Element.getClientRects</code> 方法返回一个类似数组的对象，里面是当前元素在页面上形成的所有矩形。每个矩形都有 <code>bottom</code> 、 <code>height</code> 、 <code>left</code> 、 <code>right</code> 、 <code>top</code> 和 <code>width</code> 六个属性，表示它们相对于视口的四个坐标，以及本身的高度和宽度。</p>
<h4 id="Element-insertAdjacentHTML"><a href="#Element-insertAdjacentHTML" class="headerlink" title="Element.insertAdjacentHTML()"></a>Element.insertAdjacentHTML()</h4><p><code>Element.insertAdjacentHTML</code> 方法解析HTML字符串，然后将生成的节点插入DOM树的指定位置。</p>
<h4 id="Element-remove"><a href="#Element-remove" class="headerlink" title="Element.remove()"></a>Element.remove()</h4><p><code>Element.remove</code> 方法用于将当前元素节点从DOM树删除。</p>
<h4 id="Element-focus"><a href="#Element-focus" class="headerlink" title="Element.focus()"></a>Element.focus()</h4><p><code>Element.focus</code> 方法用于将当前页面的焦点，转移到指定元素上。</p>
<h2 id="属性的操作"><a href="#属性的操作" class="headerlink" title="属性的操作"></a>属性的操作</h2><h3 id="Element-attributes-属性"><a href="#Element-attributes-属性" class="headerlink" title="Element.attributes 属性"></a>Element.attributes 属性</h3><p>返回一个类似数组的动态对象，成员是该元素标签的所有属性节点对象，属性的实时变化都会反映在这个节点对象上，其他类型的节点对象，虽然也有 <code>attribute</code> 属性，但是返回的都是 <code>null</code></p>
<p>属性节点对象有 <code>name</code> 和 <code>value</code> 属性，对应该属性的属性名和属性值。等同于 <code>nodeName</code> 属性和 <code>nodeValue</code> 属性</p>
<h3 id="元素节点对象的属性"><a href="#元素节点对象的属性" class="headerlink" title="元素节点对象的属性"></a>元素节点对象的属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img.src</span><br><span class="line">a.href</span><br></pre></td></tr></table></figure>
<p>这种写法虽然可以读写 HTML 属性，但是无法删除属性， <code>delete</code> 运算符在这里不会生效</p>
<p>HTML 元素的属性名是大小写不敏感的，但是 JavaScript 对象的属性名是大小写敏感的。转为 JavaScript 属性名时，一律采用小写，如果属性名包括多个单词，采用驼峰拼写法</p>
<p>有些 HTML 属性名是 JavaScript 的保留字，转为 JavaScript 属性时，必须改名</p>
<ul>
<li><code>for</code> 属性改为 <code>htmlFor</code></li>
<li><code>class</code> 属性改为 <code>className</code></li>
</ul>
<h3 id="属性操作的标准方法"><a href="#属性操作的标准方法" class="headerlink" title="属性操作的标准方法"></a>属性操作的标准方法</h3><h4 id="getAttribute"><a href="#getAttribute" class="headerlink" title="getAttribute()"></a>getAttribute()</h4><p>返回当前元素节点的指定属性，只返回字符串，HTML 标签对象的属性会返回各种类型的值。</p>
<h4 id="setAttribute"><a href="#setAttribute" class="headerlink" title="setAttribute()"></a>setAttribute()</h4><p><code>Element.setAttribute</code> 方法用于为当前元素节点新增属性。如果同名属性已存在，则相当于编辑已存在的属性。</p>
<h4 id="hasAttribute"><a href="#hasAttribute" class="headerlink" title="hasAttribute()"></a>hasAttribute()</h4><p><code>Element.hasAttribute</code> 方法返回一个布尔值，表示当前元素节点是否包含指定属性。</p>
<h4 id="removeAttribute"><a href="#removeAttribute" class="headerlink" title="removeAttribute()"></a>removeAttribute()</h4><p><code>Element.removeAttribute</code> 方法用于从当前元素节点移除属性。</p>
<h3 id="dataset-属性"><a href="#dataset-属性" class="headerlink" title="dataset 属性"></a>dataset 属性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mydiv"</span> <span class="attr">data-foo</span>=<span class="string">"bar"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="built_in">document</span>.getElementById(<span class="string">'mydiv'</span>);</span><br><span class="line">n.dataset.foo <span class="comment">// bar</span></span><br><span class="line">n.dataset.foo = <span class="string">'baz'</span></span><br></pre></td></tr></table></figure>
<p>可以通过 <code>dateset.foo</code> 读写 <code>data-foo</code> 属性</p>
<p>删除一个 <code>data-*</code> 属性，可以直接用 <code>delete</code> 命令</p>
<p><strong>注意</strong></p>
<p><code>data-</code> 后面的属性名有限制，只能包含字母、数字、连词线（<code>-</code>）、点（<code>.</code>）、冒号（<code>:</code>）和下划线（<code>_</code>）。而且，属性名不应该使用 <code>A</code> 到 <code>Z</code> 的大写字母，比如不能有 <code>data-helloWorld</code> 这样的属性名，而要写成 <code>data-hello-world</code>。</p>
<p>转成 <code>dataset</code> 的键名时，连词线后面如果跟着一个小写字母，那么连词线会被移除，该小写字母转为大写字母，其他字符不变。反过来，<code>dataset</code> 的键名转成属性名时，所有大写字母都会被转成连词线+该字母的小写形式，其他字符不变。比如，<code>dataset.helloWorld</code> 会转成 <code>data-hello-world</code>。</p>
<h2 id="Text-节点和-DocumentFragment-节点"><a href="#Text-节点和-DocumentFragment-节点" class="headerlink" title="Text 节点和 DocumentFragment 节点"></a>Text 节点和 DocumentFragment 节点</h2><h3 id="Text-节点的概念"><a href="#Text-节点的概念" class="headerlink" title="Text 节点的概念"></a>Text 节点的概念</h3><p><code>Text</code> 节点代表 <code>Element</code> 节点和 <code>Attribute</code> 节点的文本内容。如果一个节点只包含一段文本，那么它就有一个 <code>Text</code> 子节点，代表该节点的文本内容。由于空格也是一个字符，所以哪怕有一个空格，也会形成 <code>Text</code> 节点</p>
<h3 id="Text-节点的属性"><a href="#Text-节点的属性" class="headerlink" title="Text 节点的属性"></a>Text 节点的属性</h3><h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><p><code>data</code> 属性等同于 <code>nodeValue</code> 属性，用来设置或读取 <code>Text</code> 节点的内容。</p>
<h4 id="wholeText"><a href="#wholeText" class="headerlink" title="wholeText"></a>wholeText</h4><p><code>wholeText</code> 属性将当前 <code>Text</code> 节点与毗邻的 <code>Text</code> 节点，作为一个整体返回</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"para"</span>&gt;</span>A <span class="tag">&lt;<span class="name">em</span>&gt;</span>B<span class="tag">&lt;/<span class="name">em</span>&gt;</span> C<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> el = <span class="built_in">document</span>.getElementById(<span class="string">"para"</span>);</span><br><span class="line">el.firstChild.wholeText <span class="comment">// "A "</span></span><br><span class="line">el.firstChild.data <span class="comment">// "A "</span></span><br></pre></td></tr></table></figure>
<p>但是，一旦移除em节点，<code>wholeText</code> 属性与 <code>data</code> 属性就会有差异，因为这时其实P节点下面包含了两个毗邻的 <code>Text</code> 节点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">el.removeChild(para.childNodes[<span class="number">1</span>]);</span><br><span class="line">el.firstChild.wholeText <span class="comment">// "A C"</span></span><br><span class="line">el.firstChild.data <span class="comment">// "A "</span></span><br></pre></td></tr></table></figure>
<h3 id="Text-节点的方法"><a href="#Text-节点的方法" class="headerlink" title="Text 节点的方法"></a>Text 节点的方法</h3><p><code>appendData</code> 方法用于在 <code>Text</code> 节点尾部追加字符串。</p>
<p><code>deleteData</code> 方法用于删除 <code>Text</code> 节点内部的子字符串，第一个参数为子字符串位置，第二个参数为子字符串长度。</p>
<p><code>insertData</code> 方法用于在 <code>Text</code> 节点插入字符串，第一个参数为插入位置，第二个参数为插入的子字符串。</p>
<p><code>replaceData</code> 方法用于替换文本，第一个参数为替换开始位置，第二个参数为需要被替换掉的长度，第三个参数为新加入的字符串。</p>
<p><code>subStringData</code> 方法用于获取子字符串，第一个参数为子字符串在 <code>Text</code> 节点中的开始位置，第二个参数为子字符串长度。</p>
<p><code>remove</code> 方法用于移除当前Text节点。</p>
<p><code>splitText</code> 方法将 <code>Text</code> 节点一分为二，变成两个毗邻的 <code>Text</code> 节点。它的参数就是分割位置（从零开始），分割到该位置的字符前结束。如果分割位置不存在，将报错。</p>
<p><code>normalize</code> 方法可以将毗邻的两个 <code>Text</code> 节点合并。</p>
<h3 id="DocumentFragment-节点"><a href="#DocumentFragment-节点" class="headerlink" title="DocumentFragment 节点"></a>DocumentFragment 节点</h3><p><code>DocumentFragment</code> 节点对象没有自己的属性和方法，全部继承自 <code>Node</code> 节点和<code>ParentNode</code> 接口。也就是说，<code>DocumentFragment</code> 节点比 <code>Node</code> 节点多出以下四个属性。</p>
<p><code>children</code>：返回一个动态的 <code>HTMLCollection</code> 集合对象，包括当前 <code>DocumentFragment</code> 对象的所有子元素节点。<br><code>firstElementChild</code>：返回当前<code>DocumentFragment</code>对象的第一个子元素节点，如果没有则返回<code>null</code>。<br><code>lastElementChild</code>：返回当前<code>DocumentFragment</code>对象的最后一个子元素节点，如果没有则返回<code>null</code>。<br><code>childElementCount</code>：返回当前<code>DocumentFragment</code>对象的所有子元素数量。</p>
<h2 id="事件模型"><a href="#事件模型" class="headerlink" title="事件模型"></a>事件模型</h2><h3 id="EventTarget-接口"><a href="#EventTarget-接口" class="headerlink" title="EventTarget 接口"></a>EventTarget 接口</h3><p>DOM的事件操作（监听和触发），都定义在 <code>EventTarget</code> 接口。<code>Element</code> 节点、 <code>document</code> 节点和 <code>window</code> 对象，都部署了这个接口</p>
<ul>
<li>addEventListener 绑定事件的监听函数</li>
<li>removeEventListener 移除事件的监听函数</li>
<li>dispatchEvent 触发事件</li>
</ul>
<h3 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a>addEventListener</h3><p>接受三个参数</p>
<ul>
<li><code>type</code>：事件名称，大小写敏感。</li>
<li><code>listener</code>：监听函数。事件发生时，会调用该监听函数。</li>
<li><code>useCapture</code>：布尔值，表示监听函数是否在捕获阶段（capture）触发（参见后文《事件的传播》部分），默认为<code>false</code>（监听函数只在冒泡阶段被触发）。老式浏览器规定该参数必写，较新版本的浏览器允许该参数可选。为了保持兼容，建议总是写上该参数。</li>
</ul>
<h3 id="removeEventListener"><a href="#removeEventListener" class="headerlink" title="removeEventListener()"></a>removeEventListener()</h3><p><code>removeEventListener</code> 方法用来移除 <code>addEventListener</code> 方法添加的事件监听函数。</p>
<h3 id="dispatchEvent"><a href="#dispatchEvent" class="headerlink" title="dispatchEvent()"></a>dispatchEvent()</h3><p><code>dispatchEvent</code> 方法在当前节点上触发指定事件，从而触发监听函数的执行。该方法返回一个布尔值，只要有一个监听函数调用了 <code>Event.preventDefault()</code> ，则返回值为<code>false</code>，否则为 <code>true</code> 。</p>
<h3 id="监听函数"><a href="#监听函数" class="headerlink" title="监听函数"></a>监听函数</h3><p>事件发生时，程序所要执行的函数</p>
<h4 id="HTML-标签的-on-属性"><a href="#HTML-标签的-on-属性" class="headerlink" title="HTML 标签的 on- 属性"></a>HTML 标签的 on- 属性</h4><p>使用这种发放时 <code>on-</code> 属性的值是将会执行的代码，而不是一个函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 正确 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"doSomething()"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 错误 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"doSomething"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="Element-节点的事件属性"><a href="#Element-节点的事件属性" class="headerlink" title="Element 节点的事件属性"></a>Element 节点的事件属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只会在冒泡阶段触发</p>
<h4 id="addEventListener方法"><a href="#addEventListener方法" class="headerlink" title="addEventListener方法"></a>addEventListener方法</h4><p>第一种“HTML标签的on-属性”，违反了HTML与JavaScript代码相分离的原则；第二种“Element节点的事件属性”的缺点是，同一个事件只能定义一个监听函数，也就是说，如果定义两次onclick属性，后一次定义会覆盖前一次。因此，这两种方法都不推荐使用，除非是为了程序的兼容问题，因为所有浏览器都支持这两种方法。</p>
<p>addEventListener是推荐的指定监听函数的方法。它有如下优点：</p>
<p>可以针对同一个事件，添加多个监听函数。</p>
<p>能够指定在哪个阶段（捕获阶段还是冒泡阶段）触发回监听函数。</p>
<p>除了DOM节点，还可以部署在<code>window</code>、<code>XMLHttpRequest</code>等对象上面，等于统一了整个JavaScript的监听函数接口。</p>
<h4 id="this-对象的指向"><a href="#this-对象的指向" class="headerlink" title="this 对象的指向"></a>this 对象的指向</h4><p>以下写法的 <code>this</code> 对象都指向 Element 节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">element.onclick = print</span><br><span class="line">element.addEventListener(<span class="string">'click'</span>,print,<span class="literal">false</span>)</span><br><span class="line">element.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>.id)&#125;</span><br><span class="line"></span><br><span class="line">&lt;element onclick=<span class="string">"console.log(this.id)"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>以下写法的 <code>this</code> 对象，都指向全局对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">element.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;print()&#125;</span><br><span class="line">element.setAttribute(<span class="string">'onclick'</span>,<span class="string">'print()'</span>)</span><br><span class="line"></span><br><span class="line">&lt;element onclick=<span class="string">"print()"</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="事件的传播"><a href="#事件的传播" class="headerlink" title="事件的传播"></a>事件的传播</h3><h4 id="传播的三个阶段"><a href="#传播的三个阶段" class="headerlink" title="传播的三个阶段"></a>传播的三个阶段</h4><p>第一阶段 </p>
<p>从 window 对象传导到目标节点，称为「捕获」阶段</p>
<p>第二阶段</p>
<p>在目标节点触发，称为「目标」阶段</p>
<p>第三阶段</p>
<p>从目标节点传导回 window 对象，成为「冒泡」阶段</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- 捕获阶段：事件从`<span class="tag">&lt;<span class="name">div</span>&gt;</span>`向`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`传播时，触发`<span class="tag">&lt;<span class="name">div</span>&gt;</span>`的`click`事件；</span><br><span class="line">- 目标阶段：事件从`<span class="tag">&lt;<span class="name">div</span>&gt;</span>`到达`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`时，触发`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`的click事件；</span><br><span class="line">- 目标阶段：事件离开`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`时，触发`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`的`click`事件；</span><br><span class="line">- 冒泡阶段：事件从`<span class="tag">&lt;<span class="name">p</span>&gt;</span>`传回`<span class="tag">&lt;<span class="name">div</span>&gt;</span>`时，再次触发`<span class="tag">&lt;<span class="name">div</span>&gt;</span>`的`click`事件</span><br><span class="line"></span><br><span class="line">用户点击时，浏览器总是假定 `click` 事件的目标节点就是点击位置的嵌套最深的那个节点。所以 `<span class="tag">&lt;<span class="name">p</span>&gt;</span>` 节点的捕获阶段和冒泡阶段会是 `target` 阶段</span><br><span class="line"></span><br><span class="line">事件传播的最上层对象是 `window` 接着依次是 `document` `body` 如果 `<span class="tag">&lt;<span class="name">body</span>&gt;</span>` 元素中有一个 `<span class="tag">&lt;<span class="name">div</span>&gt;</span>` 元素,点击该元素，在捕获阶段为 `window`、`document`、`html`、`body`、`div` ， 在冒泡阶段依次为 `div`、`body`、`html`、`document`、`window`。</span><br><span class="line"></span><br><span class="line">#### 事件的代理</span><br><span class="line"></span><br><span class="line">由于事件会在冒泡阶段向上传播到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件。这种方法叫做事件的代理（delegation）。</span><br><span class="line"></span><br><span class="line">如果希望事件到某个节点为止不再传播，可以使用事件对象的 `stopPropagation` 方法。</span><br><span class="line">但是 `stopPropagation` 方法只会阻止当前监听函数的传播，不会阻止节点上的其它同样事件的监听函数，如果想要不再触发那些监听函数，可以使用 `stopImmediatePropagation` </span><br><span class="line"></span><br><span class="line">### Event 对象</span><br><span class="line"></span><br><span class="line">事件发生以后，会生成一个事件对象，作为参数传给监听函数。浏览器原生提供了一个 `Event` 对象，所有的事件都是这个对象的实例，或者说继承了 `Event.prototype` 对象</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">event = new Event(typeArg,eventInit)</span><br></pre></td></tr></table></figure>
<p><code>Event</code>构造函数接受两个参数。第一个参数是字符串，表示事件的名称；第二个参数是一个对象，表示事件对象的配置。该参数可以有以下两个属性。</p>
<ul>
<li><code>bubbles</code>：布尔值，可选，默认为<code>false</code>，表示事件对象是否冒泡。</li>
<li><code>cancelable</code>：布尔值，可选，默认为<code>false</code>，表示事件是否可以被取消。</li>
</ul>
<h4 id="event-属性"><a href="#event-属性" class="headerlink" title="event 属性"></a>event 属性</h4><p><code>bubbles</code> 属性返回一个布尔值，表示当前事件是否会冒泡。该属性为只读属性，只能在新建事件时改变。除非显式声明，Event构造函数生成的事件，默认是不冒泡的。</p>
<p><code>eventPhase</code> 属性返回一个整数值，表示事件目前所处的阶段。</p>
<ul>
<li>0，事件目前没有发生。</li>
<li>1，事件目前处于捕获阶段，即处于从祖先节点向目标节点的传播过程中。该过程是从<code>Window</code>对象到<code>Document</code>节点，再到<code>HTMLHtmlElement</code>节点，直到目标节点的父节点为止。</li>
<li>2，事件到达目标节点，即<code>target</code>属性指向的那个节点。</li>
<li>3，事件处于冒泡阶段，即处于从目标节点向祖先节点的反向传播过程中。该过程是从父节点一直到<code>Window</code>对象。只有<code>bubbles</code>属性为<code>true</code>时，这个阶段才可能发生。</li>
</ul>
<p><code>cancelable</code> 属性返回一个布尔值，表示事件是否可以取消。该属性为只读属性，只能在新建事件时改变。除非显式声明，<code>Event</code>构造函数生成的事件，默认是不可以取消的</p>
<p><code>defaultPrevented</code> 属性返回一个布尔值，表示该事件是否调用过 <code>preventDefault</code> 方法。。</p>
<h4 id="event-currentTarget，event-target"><a href="#event-currentTarget，event-target" class="headerlink" title="event.currentTarget，event.target"></a>event.currentTarget，event.target</h4><p><code>currentTarget</code> 属性返回事件当前所在的节点，即正在执行的监听函数所绑定的那个节点，<code>target</code> 属性返回事件正发生的节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hide</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> === e.target);  <span class="comment">// 有可能不是true</span></span><br><span class="line">  e.target.style.visibility = <span class="string">"hidden"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML代码为</span></span><br><span class="line"><span class="comment">// &lt;p id="para"&gt;Hello &lt;em&gt;World&lt;/em&gt;&lt;/p&gt;</span></span><br><span class="line">para.addEventListener(<span class="string">'click'</span>, hide, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>点击 World 会隐藏 <code>&lt;em&gt;</code> 节点，<code>event.currentTarget</code> 为 <code>&lt;p&gt;</code> ，<code>event.target</code> 为 <code>&lt;em&gt;</code> 节点</p>
<p>在 IE6-IE8 中，该属性的名字不是 <code>target</code> ，而是 <code>srcElement</code>。</p>
<h4 id="event-type，event-detail，event-timeStamp，event-isTrusted"><a href="#event-type，event-detail，event-timeStamp，event-isTrusted" class="headerlink" title="event.type，event.detail，event.timeStamp，event.isTrusted"></a>event.type，event.detail，event.timeStamp，event.isTrusted</h4><p><code>type</code> 属性返回一个字符串，表示事件类型，大小写敏感。</p>
<p><code>detail</code> 属性返回一个数值，表示事件的某种信息。具体含义与事件类型有关，对于鼠标事件，表示鼠标按键在某个位置按下的次数，比如对于<code>dblclick</code>事件，<code>detail</code>属性的值总是<code>2</code>。</p>
<p><code>timeStamp</code> 属性返回一个毫秒时间戳，表示事件发生的时间。</p>
<p><code>isTrusted</code> 属性返回一个布尔值，表示该事件是否为真实用户触发。</p>
<h4 id="event-preventDefault"><a href="#event-preventDefault" class="headerlink" title="event.preventDefault()"></a>event.preventDefault()</h4><p><code>preventDefault</code> 方法取消浏览器对当前事件的默认行为，比如点击链接后，浏览器跳转到指定页面，或者按一下空格键，页面向下滚动一段距离。该方法生效的前提是，事件对象的<code>cancelable</code>属性为<code>true</code>，如果为<code>false</code>，则调用该方法没有任何效果。</p>
<h4 id="event-stopPropagation"><a href="#event-stopPropagation" class="headerlink" title="event.stopPropagation()"></a>event.stopPropagation()</h4><p><code>stopPropagation</code> 方法阻止事件在 DOM 中继续传播，防止再触发定义在别的节点上的监听函数，但是不包括在当前节点上新定义的事件监听函数。</p>
<h4 id="event-stopImmediatePropagation"><a href="#event-stopImmediatePropagation" class="headerlink" title="event.stopImmediatePropagation()"></a>event.stopImmediatePropagation()</h4><p><code>stopImmediatePropagation</code> 方法阻止同一个事件的其他监听函数被调用。</p>
<h2 id="事件种类"><a href="#事件种类" class="headerlink" title="事件种类"></a>事件种类</h2><h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><h4 id="onclick-dblclick"><a href="#onclick-dblclick" class="headerlink" title="onclick ,dblclick"></a>onclick ,dblclick</h4><p>鼠标单击定义为用户在同一个位置完成一次 <code>mousedown</code> 和 <code>mouseup</code> 动作。 他们的触发顺序是 <code>mousedown</code> 首先触发， <code>mouseup</code> 接着触发 <code>click</code> 最后触发</p>
<p><code>dblclick</code> 事件当用户在 <code>element</code>、<code>document</code>、<code>window</code> 对象上，双击鼠标时触发。该事件会在 <code>mousedown</code>、<code>mouseup</code>、<code>click</code>之后触发。</p>
<h4 id="mouseup-mousedown-mousemove"><a href="#mouseup-mousedown-mousemove" class="headerlink" title="mouseup mousedown mousemove"></a>mouseup mousedown mousemove</h4><p><code>mouseup</code> 事件在释放按下的鼠标键时触发。</p>
<p><code>mousedown</code> 事件在按下鼠标键时触发。</p>
<p><code>mousemove</code> 事件当鼠标在一个节点内部移动时触发。当鼠标持续移动时，该事件会<strong>连续触发</strong>。为了避免性能问题，建议对该事件的监听函数做一些限定，比如限定一段时间内只能运行一次代码。</p>
<h4 id="mouseover，mouseenter"><a href="#mouseover，mouseenter" class="headerlink" title="mouseover，mouseenter"></a>mouseover，mouseenter</h4><p><code>mouseover</code>事件和<code>mouseenter</code>事件，都是鼠标<strong>进入一个节点时触发</strong>。</p>
<p>两者的区别是，<code>mouseenter</code>事件只触发一次，而只要鼠标在节点内部移动，<code>mouseover</code> 事件会在<strong>子节点上触发多次</strong>。</p>
<h4 id="mouseout，mouseleave"><a href="#mouseout，mouseleave" class="headerlink" title="mouseout，mouseleave"></a>mouseout，mouseleave</h4><p><code>mouseout</code> 事件和 <code>mouseleave</code> 事件，都是鼠标离开一个节点时触发。</p>
<p>两者的区别是，<code>mouseout</code> 事件会冒泡，<code>mouseleave</code> 事件不会。子节点的 <code>mouseout</code> 事件会冒泡到父节点，进而触发父节点的 <code>mouseout</code> 事件。<code>mouseleave</code> 事件就没有这种效果，所以离开子节点时，不会触发父节点的监听函数。</p>
<h4 id="contextmenu-事件"><a href="#contextmenu-事件" class="headerlink" title="contextmenu 事件"></a>contextmenu 事件</h4><p><code>contextmenu</code> 事件在一个节点上点击鼠标右键时触发，或者按下「上下文菜单」键时触发。</p>
<h3 id="MouseEvent-对象"><a href="#MouseEvent-对象" class="headerlink" title="MouseEvent 对象"></a>MouseEvent 对象</h3><h4 id="altKey，ctrlKey，metaKey，shiftKey"><a href="#altKey，ctrlKey，metaKey，shiftKey" class="headerlink" title="altKey，ctrlKey，metaKey，shiftKey"></a>altKey，ctrlKey，metaKey，shiftKey</h4><p>以下属性返回一个布尔值，表示鼠标事件发生时，是否同时按下某个键。</p>
<ul>
<li><code>altKey</code> 属性 ：Alt 键</li>
<li><code>ctrlKey</code> 属性 ：Ctrl 键</li>
<li><code>metaKey</code> 属性 ：Meta 键（Mac键盘是一个四瓣的小花，Windows键盘是Windows键）</li>
<li><code>shiftKey</code> 属性 ：Shift 键</li>
</ul>
<h4 id="button，buttons"><a href="#button，buttons" class="headerlink" title="button，buttons"></a>button，buttons</h4><p><code>button</code> 属性返回一个数值，表示按下了鼠标哪个键。</p>
<ul>
<li>-1：没有按下键。</li>
<li>0：按下主键（通常是左键）。</li>
<li>1：按下辅助键（通常是中键或者滚轮键）。</li>
<li>2：按下次键（通常是右键）。</li>
</ul>
<p><code>buttons</code> 属性返回一个3个比特位的值，表示<strong>同时按下了哪些键</strong>。它用来处理同时按下多个鼠标键的情况。</p>
<ul>
<li>1：二进制为001，表示按下左键。</li>
<li>2：二进制为010，表示按下右键。</li>
<li>4：二进制为100，表示按下中键或滚轮键。</li>
</ul>
<p>同时按下多个键的时候，每个按下的键对应的比特位都会有值。比如，同时按下左键和右键，会返回3（二进制为011）。</p>
<h4 id="clientX，clientY"><a href="#clientX，clientY" class="headerlink" title="clientX，clientY"></a>clientX，clientY</h4><p><code>clientX</code>，<code>clientY</code> 属性返回鼠标位置相对于浏览器窗口左上角的水平垂直坐标，单位为像素，与页面是否横向滚动无关。</p>
<h4 id="movementX，movementY"><a href="#movementX，movementY" class="headerlink" title="movementX，movementY"></a>movementX，movementY</h4><p><code>movementX</code> 属性返回一个水平位移，单位为像素，表示当前位置与上一个 <code>mousemove</code> 事件之间的水平距离。在数值上，等于 <code>currentEvent.movementX</code> = <code>currentEvent.screenX</code> - <code>previousEvent.screenX</code>。</p>
<h4 id="screenX，screenY"><a href="#screenX，screenY" class="headerlink" title="screenX，screenY"></a>screenX，screenY</h4><p><code>screenX</code>，<code>screenY</code> 属性返回鼠标位置相对于屏幕左上角的水平坐标，单位为像素。</p>
<h3 id="Wheel-事件"><a href="#Wheel-事件" class="headerlink" title="Wheel 事件"></a>Wheel 事件</h3><p><code>Wheel</code> 事件是与鼠标滚轮相关的事件，目前只有一个 <code>Wheel</code> 事件。用户滚动滚轮，触发此事件</p>
<p>该事件继承了 MouseEvent ，UIEvent ，Event 属性 ，还有几个自己的属性</p>
<ul>
<li>deltaX : 返回一个数值，表示一个滚轮的水平滚动量</li>
<li>deltxY : 返回一个数值，表示一个滚轮的垂直滚动量</li>
<li>deltxZ : 返回一个数值，表示一个滚轮的Z轴滚动量</li>
<li>deltaMode : 返回一个数值，表示一个单位。0为像素，1表示行，2表示页</li>
</ul>
<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><ul>
<li>keydown : 按下键盘时触发的事件</li>
<li>keypress : 只要按下的键并非 Ctrl ， Alt ，Shift 和 Meta ，就接着触发 keypress 事件</li>
<li>keyup : 松开键盘时触发该事件</li>
</ul>
<p>如果用户一直按键不松开，就会连续触发键盘事件，触发的事件如下</p>
<ul>
<li>keydown</li>
<li>keypress</li>
<li>keydown</li>
<li>keypress</li>
<li>「重复以上过程」</li>
<li>keyup</li>
</ul>
<p>keyBoard 事件还有几个可配置字段</p>
<ul>
<li>key : 默认为空字符串，返回按下的键的字符串</li>
<li>ctrlKey : 是否按下 ctrl 键</li>
<li>shiftKey : 是否按下 shift 键</li>
<li>altKey : 是否按下 alt 键</li>
<li>metaKey : 是否按下 meta 键</li>
<li>charCode : 返回一个数值，表示keypress按键的Unicode值，该属性已从标准中移除</li>
</ul>
<h3 id="进度事件"><a href="#进度事件" class="headerlink" title="进度事件"></a>进度事件</h3><ul>
<li>abort : 当进度事件被中止时触发。如果发生错误，导致事件中止，不会触发该事件</li>
<li>error : 由于错误导致资源无法加载时触发</li>
<li>load : 进度成功结束时触发</li>
<li>loadstart : 进度开始时触发</li>
<li>loadend : 进度停止时触发，发生顺序在 <code>error</code> 事件、 <code>abort</code> 事件、<code>load</code> 事件后面</li>
<li>progress : 当操作处于进度之中，由传输的数据块不断触发</li>
<li>timeout : 进度超过限时触发</li>
</ul>
<p>有时候，图片加载会在脚本运行之前就完成，尤其是脚本放置在网页底部的时候，因此有可能使得 <code>load</code> 和 <code>error</code> 事件的监听函数根本不会执行，<code>error</code> 事件的监听函数最好放在 <code>img</code> 元素的 HTML 属性中，这样才能保证发生错误时百分之百执行。<code>error</code> 事件也不会冒泡</p>
<p><code>progress</code> 事件也有几个属性</p>
<ul>
<li>lenthComputable : 返回一个布尔值，表示当前进度是否具有可计算的长度，如果为 <code>false</code> ，就表示当前进度无法测量</li>
<li>total : 返回一个数值，表示当前进度的总长度，如果是通过 HTTP 下载某个资源，表示内容本身的长度，不含 HTTP 头部的长度。如果 <code>lengthComputable</code> 属性为 <code>false</code> ，则 <code>total</code> 属性就无法去的正确的值</li>
<li>loaded : 返回一个数值，表示当前进度已经完成的数量。该属性除以 <code>total</code> 属性就可以得到目前进度的百分比</li>
</ul>
<h3 id="拖拉事件"><a href="#拖拉事件" class="headerlink" title="拖拉事件"></a>拖拉事件</h3><p>拖拉指的是，用户在某个对象上按下鼠标键不放，拖动它到另一个位置，然后释放鼠标键，将该对象放在那里</p>
<p>图片和链接不加本身就可以拖动，<code>Element</code> 节点需要设置 <code>draggable</code> 属性为 <code>true</code> ，但是这样鼠标就无法选中该字节内部的文字和子节了</p>
<h4 id="事件种类-1"><a href="#事件种类-1" class="headerlink" title="事件种类"></a>事件种类</h4><p>当 <code>Element</code> 节点或选中的文本被拖拉时，就会持续触发拖拉事件，包括以下一些事件</p>
<p>在拖拉节点上触发的事件</p>
<ul>
<li>drag事件 ： 拖拉过程中，在被拖拉的节点上持续触发</li>
<li>dragstart事件 ：拖拉开始时触发，该事件的 <code>target</code> 属性是被拖拉的节点</li>
<li>dragend事件 ： 在拖拉结束时触发</li>
</ul>
<p>在目标节点上触发的事件</p>
<ul>
<li>dragenter事件 ： 拖拉进入当前节点时触发</li>
<li>dragover事件 ：拖拉到当前节点上方时持续触发</li>
<li>dragleave事件 ：拖拉离开当前范围节点时触发</li>
<li>drop事件 ：被拖拉的节点释放，目标节点触发</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>拖拉过程只触发以上这些拖拉事件，尽管鼠标在移动，但是鼠标事件不会触发</li>
<li>将文件从操作系统拖拉进浏览器，不会触发 <code>dragstart</code> 和 <code>dragend</code> 事件</li>
<li><code>dragenter</code> 和 <code>dragover</code> 事件默认设置为当前节点不允许drop，如果想要在目标节点上 <code>drop</code> 拖拉的数据，首先必须阻止这两个事件的默认行为，或者取消这两个事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ondragover</span>=<span class="string">"event.preventDefault()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="DataTransfer-对象概述"><a href="#DataTransfer-对象概述" class="headerlink" title="DataTransfer 对象概述"></a>DataTransfer 对象概述</h4><p>所有的拖拉事件都有一个 dataTransfer 属性，用来保存需要传递的数据。这个属性的值是一个 DataTransfer 对象</p>
<p>拖拉的数据保存两方面的数据，数据的种类和数据的数值，种类是一个MIME字符串，数据的值是一个字符串</p>
<p>拖拉开始时提供数据类型和数据值，<code>dragenter</code> 和 <code>dragover</code> 事件检查数据，以确定是否准许放下。</p>
<h4 id="DataTransfer-对象的属性"><a href="#DataTransfer-对象的属性" class="headerlink" title="DataTransfer 对象的属性"></a>DataTransfer 对象的属性</h4><p><strong>dropEffect</strong></p>
<p>设置放下被拖拉节点时的效果</p>
<ul>
<li>copy 复制被拖拉的节点</li>
<li>move 移动被拖拉的节点</li>
<li>link 创建指向被拖拉的节点的链接</li>
<li>none 无法放下被拖拉的节点</li>
</ul>
<p>一般在 <code>dragenter</code> 和 <code>dragover</code> 事件的监听函数中设置，对于 <code>dragstart</code>、<code>drag</code>、<code>dragleave</code> 这三个事件，该属性不起作用。进入目标节点后，用户可通过Shift键和Control键，改变初始值</p>
<p>箭头会根据 <code>dropEffect</code> 属性改变形状</p>
<p><strong>effectAllowed</strong></p>
<p><code>effectAllowed</code> 属性设置本次拖拉中允许的效果</p>
<ul>
<li>copy 复制被拖拉的节点</li>
<li>move 移动被拖拉的节点</li>
<li>link 创建指向被拖拉节点的链接</li>
<li>copyLink 允许copy或link</li>
<li>copyMove 允许copy或move</li>
<li>linkMove 允许link或move</li>
<li>all 允许所有效果</li>
<li>none 无法放下被拖拉的节点</li>
<li>uninitialized 默认值，等同于all</li>
</ul>
<p>只要 <code>dropEffect</code> 属性和 <code>effectAllowed</code> 属性之中，有一个为none，就无法在目标节点完成  <code>drop</code> 操作</p>
<p><strong>files</strong></p>
<p><code>files</code> 属性是一个 FileList 对象，如果本次拖拉不涉及文件，则属性为空的 FileList 对象</p>
<p>通过 <code>files</code> 属性读取拖拉文件的信息，如果想要读取文件的内容，要使用 FileReader 对象</p>
<p><strong>types</strong></p>
<p><code>types</code> 属性是一个数组，保存每一次拖拉的数据格式，比如拖拉文件，则格式信息为File</p>
<h4 id="DataTransfer-对象的方法"><a href="#DataTransfer-对象的方法" class="headerlink" title="DataTransfer 对象的方法"></a>DataTransfer 对象的方法</h4><p><strong>setData()</strong></p>
<p><code>setData</code> 方法用来设置事件所带有的指定类型的数据。它接受两个参数，第一个是数据类型，第二个是具体数据。如果指定的类型在现有数据中不存在，则该类型将写入 <code>types</code> 属性；如果已经存在，在该类型的现有数据将被替换。</p>
<p>如果拖拉文本框或者拖拉选中的文本，会默认将文本数据添加到 <code>dataTransfer</code> 属性，不用手动指定。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">"true"</span> <span class="attr">ondragstart</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">  event.dataTransfer.setData('text/plain', 'bbb')"</span>&gt;</span></span><br><span class="line">  aaa</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，拖拉数据实际上是 bbb ，而不是 aaa</p>
<p>由于 <code>text/plain</code> 是最普遍支持的格式，为了保证兼容性，建议最后总是将数据保存一份纯文本的格式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dt = event.dataTransfer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加链接</span></span><br><span class="line">dt.setData(<span class="string">"text/uri-list"</span>, <span class="string">"http://www.example.com"</span>);</span><br><span class="line">dt.setData(<span class="string">"text/plain"</span>, <span class="string">"http://www.example.com"</span>);</span><br><span class="line"><span class="comment">// 添加HTML代码</span></span><br><span class="line">dt.setData(<span class="string">"text/html"</span>, <span class="string">"Hello there, &lt;strong&gt;stranger&lt;/strong&gt;"</span>);</span><br><span class="line">dt.setData(<span class="string">"text/plain"</span>, <span class="string">"Hello there, &lt;strong&gt;stranger&lt;/strong&gt;"</span>);</span><br><span class="line"><span class="comment">// 添加图像的URL</span></span><br><span class="line">dt.setData(<span class="string">"text/uri-list"</span>, imageurl);</span><br><span class="line">dt.setData(<span class="string">"text/plain"</span>, imageurl);</span><br></pre></td></tr></table></figure>
<p><strong>getData()</strong></p>
<p><code>getData</code> 方法接受一个字符串（表示数据类型）作为参数，返回事件所带的指定类型的数据（通常是用 <code>setData</code> 方法添加的数据）。如果指定类型的数据不存在，则返回空字符串。通常只有 <code>drop</code> 事件触发后，才能取出数据。如果取出另一个域名存放的数据，将会报错。</p>
<p><strong>clearData()</strong></p>
<p><code>clearData</code> 方法接受一个字符串（表示数据类型）作为参数，删除事件所带的指定类型的数据。如果没有指定类型，则删除所有数据。如果指定类型不存在，则原数据不受影响。</p>
<p><strong>setDragImage()</strong></p>
<p>拖动过程中（ <code>dragstart</code> 事件触发后），浏览器会显示一张图片跟随鼠标一起移动，表示被拖动的节点。这张图片是自动创造的，通常显示为被拖动节点的外观，不需要自己动手设置 。<code>setDragImage</code> 方法可以用来自定义这张图片，它接受三个参数，第一个是<code>img</code> 图片元素或者 <code>canvas</code> 元素，如果省略或为 <code>null</code> 则使用被拖动的节点的外观，第二个和第三个参数为鼠标相对于该图片左上角的横坐标和右坐标。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div.addEventListener(<span class="string">'dragstart'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">  img.src=<span class="string">"http://path/to/img"</span>;</span><br><span class="line">  e.dataTransfer.setDragImage(img,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h3 id="触摸事件"><a href="#触摸事件" class="headerlink" title="触摸事件"></a>触摸事件</h3><p>Touch 对象表示触摸点，多个触摸点由 TouchList 对象表示，TouchEvent 对象代表由触摸引发的事件。</p>
<p>很多时候，触摸事件和鼠标事件同时触发，即使这个时候并没有用到鼠标。这是为了让那些只定义鼠标事件、没有定义触摸事件的代码，在触摸屏的情况下仍然能用。如果想避免这种情况，可以用 <code>preventDefault</code> 方法阻止发出鼠标事件。</p>
<h4 id="Touch-对象"><a href="#Touch-对象" class="headerlink" title="Touch 对象"></a>Touch 对象</h4><p>Touch 对象代表一个触摸点</p>
<p><strong>identifier</strong></p>
<p><code>identifier</code> 属性表示 <code>Touch</code> 实例的独一无二的识别符。它在整个触摸过程中保持不变。</p>
<p><strong>screenX，screenY，clientX，clientY，pageX，pageY</strong></p>
<p><code>screenX</code> 属性和 <code>screenY</code> 属性，分别表示触摸点相对于屏幕左上角的横坐标和纵坐标，与页面是否滚动无关。</p>
<p><code>clientX</code> 属性和 <code>clientY</code> 属性，分别表示触摸点相对于浏览器视口左上角的横坐标和纵坐标，与页面是否滚动无关。</p>
<p><code>pageX</code> 属性和 <code>pageY</code> 属性，分别表示触摸点相对于当前页面左上角的横坐标和纵坐标，包含了页面滚动带来的位移。</p>
<p><strong>radiusX，radiusY，rotationAngle</strong></p>
<p><code>radiusX</code> 属性和 <code>radiusY</code> 属性，分别返回触摸点周围受到影响的椭圆范围的X轴和Y轴，单位为像素。</p>
<p><code>rotationAngle</code> 属性表示触摸区域的椭圆的旋转角度，单位为度数，在0到90度之间。</p>
<p>上面这三个属性共同定义了用户与屏幕接触的区域，对于描述手指这一类非精确的触摸，很有帮助。指尖接触屏幕，触摸范围会形成一个椭圆，这三个属性就用来描述这个椭圆区域。</p>
<p><strong>force</strong></p>
<p><code>force</code>属性返回一个0到1之间的数值，表示触摸压力。0代表没有压力，1代表硬件所能识别的最大压力。</p>
<p><strong>target</strong></p>
<p><code>target</code> 属性返回一个Element节点，代表触摸发生的那个节点。</p>
<h4 id="TouchList-对象"><a href="#TouchList-对象" class="headerlink" title="TouchList 对象"></a>TouchList 对象</h4><p><code>TouchList</code> 对象是一个类似数组的对象，成员是与某个触摸事件相关的所有触摸点。</p>
<p><code>TouchList</code> 实例的 <code>identifiedTouch</code> 方法和 <code>item</code> 方法，分别使用id属性和索引值（从0开始）作为参数，取出指定的 <code>Touch</code> 对象。</p>
<h4 id="TouchEvent-对象"><a href="#TouchEvent-对象" class="headerlink" title="TouchEvent 对象"></a>TouchEvent 对象</h4><p><strong>键盘相关属性</strong></p>
<ul>
<li>altKey 是否按下alt键</li>
<li>ctrlKey 是否按下ctrl键</li>
<li>metaKey 是否按下meta键</li>
<li>shiftKey 是否按下shift键</li>
</ul>
<p><strong>changedTouches</strong></p>
<p><code>changedTouches</code> 属性返回一个 <code>TouchList</code> 对象，包含了由当前触摸事件引发的所有 <code>Touch</code> 对象（即相关的触摸点）。</p>
<p><strong>targetTouches</strong></p>
<p><code>targetTouches</code> 属性返回一个 <code>TouchList</code> 对象，包含了触摸的目标Element节点内部，所有仍然处于活动状态的触摸点。</p>
<p><strong>touches</strong></p>
<p><code>touches</code> 属性返回一个 <code>TouchList</code> 对象，包含了所有仍然处于活动状态的触摸点。</p>
<h4 id="触摸事件的种类"><a href="#触摸事件的种类" class="headerlink" title="触摸事件的种类"></a>触摸事件的种类</h4><ul>
<li>touchstart：用户接触触摸屏时触发，它的target属性返回发生触摸的Element节点。</li>
<li>touchend：用户不再接触触摸屏时（或者移出屏幕边缘时）触发，它的target属性与touchstart事件的target属性是一致的，它的changedTouches属性返回一个TouchList对象，包含所有不再触摸的触摸点（Touch对象）。</li>
<li>touchmove：用户移动触摸点时触发，它的target属性与touchstart事件的target属性一致。如果触摸的半径、角度、力度发生变化，也会触发该事件。</li>
<li>touchcancel：触摸点取消时触发，比如在触摸区域跳出一个情态窗口（modal window）、触摸点离开了文档区域（进入浏览器菜单栏区域）、用户放置更多的触摸点（自动取消早先的触摸点）。</li>
</ul>
<h3 id="表单事件"><a href="#表单事件" class="headerlink" title="表单事件"></a>表单事件</h3><h4 id="Input事件，select事件，change事件"><a href="#Input事件，select事件，change事件" class="headerlink" title="Input事件，select事件，change事件"></a>Input事件，select事件，change事件</h4><p><code>input</code> 事件当 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code> 的值发生变化时触发。此外，打开<code>contenteditable</code> 属性的元素，只要值发生变化，也会触发 <code>input</code> 事件。</p>
<p><code>input</code> 事件的一个特点，就是会连续触发，比如用户每次按下一次按键，就会触发一次<code>input</code> 事件。</p>
<p><code>select</code> 事件当在 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code> 中选中文本时触发。</p>
<p><code>Change</code> 事件当 <code>&lt;input&gt;</code>、<code>&lt;select&gt;</code>、<code>&lt;textarea&gt;</code> 的值发生变化时触发。它与<code>input</code> 事件的最大不同，就是不会连续触发，只有当全部修改完成时才会触发，而且<code>input</code> 事件必然会引发 <code>change</code> 事件。具体来说，分成以下几种情况。</p>
<ul>
<li>激活单选框（radio）或复选框（checkbox）时触发。</li>
<li>户提交时触发。比如，从下列列表（select）完成选择，在日期或文件输入框完成选择。</li>
<li>当文本框或 <code>textarea</code> 元素的值发生改变，并且丧失焦点时触发。</li>
</ul>
<h4 id="reset事件，submit事件"><a href="#reset事件，submit事件" class="headerlink" title="reset事件，submit事件"></a>reset事件，submit事件</h4><p><code>reset</code> 事件当表单重置（所有表单成员变回默认值）时触发。</p>
<p><code>submit</code> 事件当表单数据向服务器提交时触发。注意，<code>submit</code> 事件的发生对象是 <code>form</code> 元素，<strong>而不是 <code>button</code> 元素（即使它的类型是 <code>submit</code> ），因为提交的是表单，而不是按钮。</strong></p>
<h3 id="文档事件"><a href="#文档事件" class="headerlink" title="文档事件"></a>文档事件</h3><h4 id="beforeunload-事件"><a href="#beforeunload-事件" class="headerlink" title="beforeunload 事件"></a>beforeunload 事件</h4><p><code>beforeunload</code> 事件在窗口将要关闭，或者网页（即 <code>document</code> 对象）将要卸载时触发。它可以用来防止用户不小心关闭网页。</p>
<p>根据标准，只要在该事件的回调函数中，调用了 <code>event.preventDefault()</code> ，或者 <code>event.returnValue</code> 属性的值是一个非空的值，就会自动跳出一个确认框，让用户确认是否关闭网页。如果用户点击“取消”按钮，网页就不会关闭。 <code>event.returnValue</code> 属性的值，会显示在确认对话框之中。</p>
<p>许多手机浏览器默认忽视这个事件，而桌面浏览器也可以这样设置，所以这个事件有可能根本不生效。所以，<strong>不能依赖它来阻止用户关闭窗口</strong>。</p>
<h4 id="unload-事件"><a href="#unload-事件" class="headerlink" title="unload 事件"></a>unload 事件</h4><p>unload事件在窗口关闭或者document对象将要卸载时触发，发生在window、body、frameset等对象上面。它的触发顺序排在beforeunload、pagehide事件后面。unload事件只在页面没有被浏览器缓存时才会触发，换言之，如果通过按下“前进/后退”导致页面卸载，并不会触发unload事件。</p>
<p>当unload事件发生时，document对象处于一个特殊状态。所有资源依然存在，但是对用户来说都不可见，UI互动（window.open、alert、confirm方法等）全部无效。这时即使抛出错误，也不能停止文档的卸载。</p>
<p>如果在window对象上定义了该事件，网页就不会被浏览器缓存。</p>
<h4 id="load事件，error事件"><a href="#load事件，error事件" class="headerlink" title="load事件，error事件"></a>load事件，error事件</h4><p><code>load</code> 事件在页面加载成功时触发，<code>error</code> 事件在页面加载失败时触发。注意，页面从浏览器缓存加载，并不会触发 <code>load</code> 事件。</p>
<h4 id="pageshow事件，pagehide事件"><a href="#pageshow事件，pagehide事件" class="headerlink" title="pageshow事件，pagehide事件"></a>pageshow事件，pagehide事件</h4><p>默认情况下，浏览器会在当前会话（session）缓存页面，当用户点击“前进/后退”按钮时，浏览器就会从缓存中加载页面。</p>
<p>pageshow事件在页面加载时触发，包括第一次加载和从缓存加载两种情况。如果要指定页面每次加载（不管是不是从浏览器缓存）时都运行的代码，可以放在这个事件的监听函数。</p>
<p>pagehide事件与pageshow事件类似，当用户通过“前进/后退”按钮，离开当前页面时触发。它与unload事件的区别在于，如果在window对象上定义unload事件的监听函数之后，页面不会保存在缓存中，而使用pagehide事件，页面会保存在缓存中。</p>
<h4 id="DOMContentLoaded事件"><a href="#DOMContentLoaded事件" class="headerlink" title="DOMContentLoaded事件"></a>DOMContentLoaded事件</h4><p>当HTML文档下载并解析完成以后，就会在document对象上触发DOMContentLoaded事件。这时，仅仅完成了HTML文档的解析（整张页面的DOM生成），所有外部资源（样式表、脚本、iframe等等）可能还没有下载结束。也就是说，这个事件比load事件，发生时间早得多。</p>
<h4 id="readystatechange事件"><a href="#readystatechange事件" class="headerlink" title="readystatechange事件"></a>readystatechange事件</h4><p>readystatechange事件发生在Document对象和XMLHttpRequest对象，当它们的readyState属性发生变化时触发。</p>
<h4 id="scroll事件"><a href="#scroll事件" class="headerlink" title="scroll事件"></a>scroll事件</h4><p>scroll事件在文档或文档元素滚动时触发，主要出现在用户拖动滚动条。</p>
<h4 id="resize事件"><a href="#resize事件" class="headerlink" title="resize事件"></a>resize事件</h4><p>resize事件在改变浏览器窗口大小时触发，发生在window、body、frameset对象上面。</p>
<h4 id="焦点事件"><a href="#焦点事件" class="headerlink" title="焦点事件"></a>焦点事件</h4><ul>
<li>focus事件：Element节点获得焦点后触发，该事件不会冒泡。</li>
<li>blur事件：Element节点失去焦点后触发，该事件不会冒泡。</li>
<li>focusin事件：Element节点将要获得焦点时触发，发生在focus事件之前。该事件会冒泡。Firefox不支持该事件。</li>
<li>focusout事件：Element节点将要失去焦点时触发，发生在blur事件之前。该事件会冒泡。Firefox不支持该事件。</li>
</ul>
<h2 id="CSS-操作"><a href="#CSS-操作" class="headerlink" title="CSS 操作"></a>CSS 操作</h2><h3 id="style-属性"><a href="#style-属性" class="headerlink" title="style 属性"></a>style 属性</h3><p>操作 CSS 样式最简单的方法，就是使用网页元素节点的 <code>getAttribute</code> 方法、 <code>setAttribute</code> 方法和 <code>removeAttribute</code> 方法，直接读写或删除网页元素的 <code>style</code> 属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div.setAttribute(</span><br><span class="line">  <span class="string">'style'</span>,</span><br><span class="line">  <span class="string">'background-color:red;'</span> + <span class="string">'border:1px solid black;'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="Style-对象"><a href="#Style-对象" class="headerlink" title="Style 对象"></a>Style 对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divStyle = <span class="built_in">document</span>.querySelector(<span class="string">'div'</span>).style;</span><br></pre></td></tr></table></figure>
<p>这个 <code>style</code> 对象可以直接操作，但是名字需要改写，比如 <code>background-color</code> 写成 <code>backgroundColor</code>。如果CSS属性是JavaScript保留字，那规则名之前需要加上字符串<code>css</code> ，比如 <code>float</code> 写成 <code>cssFloat</code> </p>
<h4 id="cssText-属性"><a href="#cssText-属性" class="headerlink" title="cssText 属性"></a>cssText 属性</h4><p>元素节点对象的 <code>style</code> 对象，有一个 <code>cssText</code> 属性，可以读写或删除整个样式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divStyle = <span class="built_in">document</span>.querySelector(<span class="string">'div'</span>).style;</span><br><span class="line"></span><br><span class="line">divStyle.cssText = <span class="string">'background-color: red;'</span></span><br><span class="line">  + <span class="string">'border: 1px solid black;'</span></span><br><span class="line">  + <span class="string">'height: 100px;'</span></span><br><span class="line">  + <span class="string">'width: 100px;'</span>;</span><br></pre></td></tr></table></figure>
<p><code>cssText</code> 的属性值不用改写 CSS 属性名</p>
<h4 id="CSS-模块的侦测"><a href="#CSS-模块的侦测" class="headerlink" title="CSS 模块的侦测"></a>CSS 模块的侦测</h4><p>CSS的规格发展太快，新的模块层出不穷。不同浏览器的不同版本，对CSS模块的支持情况都不一样。有时候，需要知道当前浏览器是否支持某个模块，这就叫做「CSS模块的侦测」。</p>
<h4 id="setProperty-，getPropertyValue-，removeProperty"><a href="#setProperty-，getPropertyValue-，removeProperty" class="headerlink" title="setProperty()，getPropertyValue()，removeProperty()"></a>setProperty()，getPropertyValue()，removeProperty()</h4><ul>
<li><code>setProperty(propertyName,value)</code> ：设置某个CSS属性。</li>
<li><code>getPropertyValue(propertyName)</code> ：读取某个CSS属性。</li>
<li><code>removeProperty(propertyName)</code> ：删除某个CSS属性。 </li>
</ul>
<h4 id="window-getComputedStyle"><a href="#window-getComputedStyle" class="headerlink" title="window.getComputedStyle()"></a>window.getComputedStyle()</h4><p><code>window.getComputedStyle</code> 方法，就用来返回这个规则。它接受一个DOM节点对象作为参数，返回一个包含该节点最终样式信息的对象。所谓“最终样式信息”，指的是各种CSS规则叠加后的结果。</p>
<p><code>getComputedStyle</code> 方法还可以接受第二个参数，表示指定节点的伪元素（比如<code>:before</code>、<code>:after</code>、<code>:first-line</code>、<code>:first-letter</code> 等）</p>
<p><strong>注意</strong></p>
<ul>
<li>返回的CSS值都是绝对单位，比如，长度都是像素单位（返回值包括px后缀），颜色是 <code>rgb(#, #, #)</code> 或 <code>rgba(#, #, #, #)</code> 格式。</li>
<li>CSS规则的简写形式无效，比如，想读取 <code>margin</code> 属性的值，不能直接读，只能读 <code>marginLeft</code>、<code>marginTop</code> 等属性。</li>
<li>如果一个元素不是绝对定位， <code>top</code> 和 <code>left</code> 属性总是返回 <code>auto</code> 。</li>
<li>该方法返回的样式对象的 <code>cssText</code> 属性无效，返回 <code>undefined</code> 。</li>
<li>该方法返回的样式对象是只读的，如果想设置样式，应该使用元素节点的 <code>style</code> 属性。</li>
</ul>
<h3 id="CSS-伪元素"><a href="#CSS-伪元素" class="headerlink" title="CSS 伪元素"></a>CSS 伪元素</h3><p>CSS伪元素是通过CSS向DOM添加的元素，主要方法是通过 <code>:before</code> 和 <code>:after</code> 选择器生成伪元素，然后用 <code>content</code> 属性指定伪元素的内容。</p>
<h3 id="StyleSheet对象"><a href="#StyleSheet对象" class="headerlink" title="StyleSheet对象"></a>StyleSheet对象</h3><h4 id="获取样式表"><a href="#获取样式表" class="headerlink" title="获取样式表"></a>获取样式表</h4><p><code>document.styleSheets</code> 返回当前页面所有 <code>StyleSheet</code> 对象。是一个类数组对象</p>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p><strong>media</strong></p>
<p><code>media</code> 属性表示这个样式表是用于屏幕（screen），还是用于打印（print），或两者都适用（all）。该属性只读，默认值是 <code>screen</code>。</p>
<p><strong>disabled</strong></p>
<p><code>disabled</code> 属性用于打开或关闭一张样式表。<code>disabled</code> 属性只能在 JavaScript 脚本中设置，不能在 HTML 语句中设置。</p>
<p><strong>href</strong></p>
<p><code>href</code> 属性是只读属性，返回 <code>StyleSheet</code> 对象连接的样式表地址。对于内嵌的 <code>&lt;style&gt;</code> 节点，该属性等于 <code>null</code> 。</p>
<p><strong>title</strong></p>
<p><code>title</code> 属性返回 <code>StyleSheet</code> 对象的 <code>title</code> 值。</p>
<p><strong>type属性</strong></p>
<p><code>type</code> 属性返回 <code>StyleSheet</code> 对象的 <code>type</code> 值，通常是 <code>text/css</code>。</p>
<p><strong>parentStyleSheet</strong></p>
<p>CSS的 <code>@import</code> 命令允许在样式表中加载其他样式表。<code>parentStyleSheet</code> 属性返回包含了当前样式表的那张样式表。如果当前样式表是顶层样式表，则该属性返回 <code>null</code>。</p>
<p><strong>ownerNode</strong></p>
<p><code>ownerNode</code> 属性返回 <code>StyleSheet</code> 对象所在的DOM节点，通常是 <code>&lt;link&gt;</code> 或 <code>&lt;style&gt;</code>。对于那些由其他样式表引用的样式表，该属性为 <code>null</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HTML代码为</span></span><br><span class="line"><span class="comment">// &lt;link rel="StyleSheet" href="example.css" type="text/css" /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.styleSheets[<span class="number">0</span>].ownerNode <span class="comment">// [object HTMLLinkElement]</span></span><br></pre></td></tr></table></figure>
<p><strong>cssRules</strong></p>
<p><code>cssRules</code> 属性指向一个类似数组的对象，里面每一个成员就是当前样式表的一条CSS规则。使用该规则的 <code>cssText</code> 属性，可以得到CSS规则对应的字符串。</p>
<h4 id="insertRule-，deleteRule"><a href="#insertRule-，deleteRule" class="headerlink" title="insertRule()，deleteRule()"></a>insertRule()，deleteRule()</h4><p><code>insertRule</code> 方法用于在当前样式表的 <code>cssRules</code> 对象插入CSS规则，<code>deleteRule</code> 方法用于删除 <code>cssRules</code> 对象的CSS规则。</p>
<p><code>insertRule</code> 方法的第一个参数是表示CSS规则的字符串，第二个参数是该规则在<code>cssRules</code> 象的插入位置，是一个数值。<code>deleteRule</code> 方法的参数是该条规则在<code>cssRules</code> 对象中的位置。</p>
<h4 id="添加样式表"><a href="#添加样式表" class="headerlink" title="添加样式表"></a>添加样式表</h4><p>添加内部样式表 <code>&lt;style&gt;</code> 节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line">style.setAttribute(<span class="string">'media'</span>,<span class="string">'screen'</span>);</span><br><span class="line">style.setAttribute(<span class="string">'media'</span>,<span class="string">'@media only screen and (max-width : 1024px)'</span>);</span><br><span class="line">style.innerHTML = <span class="string">'body&#123;color:red&#125;'</span>;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(style);</span><br></pre></td></tr></table></figure>
<p>添加外部样式表，在文档中添加 <code>&lt;link&gt;</code> 节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> linkElm = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>);</span><br><span class="line">linkElm.setAttribute(<span class="string">'rel'</span>, <span class="string">'stylesheet'</span>);</span><br><span class="line">linkElm.setAttribute(<span class="string">'type'</span>, <span class="string">'text/css'</span>);</span><br><span class="line">linkElm.setAttribute(<span class="string">'href'</span>, <span class="string">'reset-min.css'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.head.appendChild(linkElm);</span><br></pre></td></tr></table></figure>
<h3 id="CSS-规则"><a href="#CSS-规则" class="headerlink" title="CSS 规则"></a>CSS 规则</h3><p>一条CSS规则包括两个部分：CSS选择器和样式声明。下面就是一条典型的CSS规则。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.myClass</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="window-matchMedia"><a href="#window-matchMedia" class="headerlink" title="window.matchMedia()"></a>window.matchMedia()</h3><p><code>window.matchMedia</code> 方法用来检查CSS的 <code>mediaQuery</code> 语句</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="built_in">window</span>.matchMedia(<span class="string">'(min-width: 600px)'</span>);</span><br><span class="line">result.media <span class="comment">// (min-width: 600px)</span></span><br><span class="line">result.matches <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>media</code> 返回所查询的 <code>mediaQuery</code> 语句字符串，<code>matches</code> 返回一个布尔值，表示当前环境是否匹配查询语句</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="built_in">window</span>.matchMedia(<span class="string">'(max-width: 700px)'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (result.matches) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'页面宽度小于等于700px'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'页面宽度大于700px'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="监听事件"><a href="#监听事件" class="headerlink" title="监听事件"></a>监听事件</h4><p><code>window.matchMedia</code> 方法返回的 <code>MediaQueryList</code> 对象有两个方法，用来监听事件：<code>addListener</code> 方法和 <code>removeListener</code> 方法。如果 <code>mediaQuery</code> 查询结果发生变化，就调用指定的回调函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mql = <span class="built_in">window</span>.matchMedia(<span class="string">"(max-width: 700px)"</span>);</span><br><span class="line"></span><br><span class="line">mql.addListener(mqCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>
<h3 id="CSS事件"><a href="#CSS事件" class="headerlink" title="CSS事件"></a>CSS事件</h3><h4 id="transitionEnd-事件"><a href="#transitionEnd-事件" class="headerlink" title="transitionEnd 事件"></a>transitionEnd 事件</h4><p>css的过渡效果「transition」结束后，触发 <code>transitionEnd</code> 事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">el.addEventListener(<span class="string">'transitionend'</span>, onTransitionEnd, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onTransitionEnd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Transition end'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>transitionEnd</code> 的事件对象具有以下属性。</p>
<ul>
<li><code>propertyName</code> ：发生 <code>transition</code> 效果的CSS属性名。</li>
<li><code>elapsedTime</code> ：<code>transition</code> 效果持续的秒数，不含 <code>transition-delay</code> 的时间。</li>
<li><code>pseudoElement</code> ：如果 <code>transition</code> 效果发生在伪元素，会返回该伪元素的名称，以「::」开头。如果不发生在伪元素上，则返回一个空字符串。</li>
</ul>
<h4 id="animationstart事件，animationend事件，animationiteration事件"><a href="#animationstart事件，animationend事件，animationiteration事件" class="headerlink" title="animationstart事件，animationend事件，animationiteration事件"></a>animationstart事件，animationend事件，animationiteration事件</h4><ul>
<li>animationstart : 动画开始时触发</li>
<li>animationend : 动画结束时触发</li>
<li>animationiteration : 开始新一轮动画循环时触发。如果animationiteration-count属性等于1，该事件不触发，即只播放一轮的CSS动画，不触发animationiteration事件</li>
</ul>
<h2 id="Mutation-Observer-API"><a href="#Mutation-Observer-API" class="headerlink" title="Mutation Observer API"></a>Mutation Observer API</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>用来监视 DOM 变动，异步触发而且不是马上触发，而是要等到当前所有 DOM 操作都结束才触发</p>
<ul>
<li>它等待所有脚本任务完成后，才会运行，即采用异步方式。</li>
<li>它把 DOM 变动记录封装成一个数组进行处理，而不是一条条地个别处理 DOM 变动。</li>
<li>它既可以观察发生在 DOM 的所有类型变动，也可以观察某一类变动。</li>
</ul>
<h3 id="MutationObserver-构造函数"><a href="#MutationObserver-构造函数" class="headerlink" title="MutationObserver 构造函数"></a>MutationObserver 构造函数</h3><p>回调函数接受两个参数，第一个是变动数组，第二个是观察实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="keyword">function</span> (<span class="params">mutations, observer</span>) </span>&#123;</span><br><span class="line">  mutations.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">mutation</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(mutation);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><h4 id="observe"><a href="#observe" class="headerlink" title="observe()"></a>observe()</h4><ul>
<li>第一个参数是所要观察的 DOM 节点</li>
<li>第二个参数是一个配置对象，用来指定所要观察的特定变动</li>
</ul>
<p>配置对象有以下几种</p>
<ul>
<li>childList：子节点的变动。</li>
<li>attributes：属性的变动。</li>
<li>characterData：节点内容或节点文本的变动。</li>
<li>subtree：所有后代节点的变动。</li>
<li>attributeOldValue：类型为布尔值，表示观察attributes变动时，是否需要记录变动前的属性值。</li>
<li>characterDataOldValue：类型为布尔值，表示观察characterData变动时，是否需要记录变动前的值。</li>
<li>attributeFilter：类型为数组，表示需要观察的特定属性（比如[‘class’,’src’]）。</li>
</ul>
<h4 id="disconnect-takeRecords"><a href="#disconnect-takeRecords" class="headerlink" title="disconnect(),takeRecords()"></a>disconnect(),takeRecords()</h4><p><code>disconnect</code> 方法用来停止观察。调用该方法后，DOM 再发生变动，也不会触发观察器。</p>
<p><code>takeRecords</code> 方法用来清除变动记录，即不再处理未处理的变动。该方法返回变动记录的数组。</p>
<h3 id="MutationRecord-对象"><a href="#MutationRecord-对象" class="headerlink" title="MutationRecord 对象"></a>MutationRecord 对象</h3><p><code>MutationRecord</code> 对象包含了DOM的相关信息，有如下属性：</p>
<ul>
<li>type：观察的变动类型（attribute、characterData或者childList）。</li>
<li>target：发生变动的DOM节点。</li>
<li>addedNodes：新增的DOM节点。</li>
<li>removedNodes：删除的DOM节点。</li>
<li>previousSibling：前一个同级节点，如果没有则返回null。</li>
<li>nextSibling：下一个同级节点，如果没有则返回null。</li>
<li>attributeName：发生变动的属性。如果设置了attributeFilter，则只返回预先指定的属性。</li>
<li>oldValue：变动前的值。这个属性只对attribute和characterData变动有效，如果发生childList变动，则返回null。</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/LeanJs/" rel="tag"><i class="fa fa-tag"></i> LeanJs</a>
          
            <a href="/tags/ES5/" rel="tag"><i class="fa fa-tag"></i> ES5</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/26/LeanJS语法专题/" rel="next" title="LeanJs「 ES5 」-- 语法专题">
                <i class="fa fa-chevron-left"></i> LeanJs「 ES5 」-- 语法专题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/27/LeanJS浏览器环境/" rel="prev" title="LeanJs「 ES5 」-- 浏览器环境">
                LeanJs「 ES5 」-- 浏览器环境 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="Hutchins">
            
              <p class="site-author-name" itemprop="name">Hutchins</p>
              <p class="site-description motion-element" itemprop="description">Never stop trying, finish and do everything you've started</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/MLuminary" title="GitHub &rarr; https://github.com/MLuminary"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:haoqin89127@gmail.com" title="E-Mail &rarr; mailto:haoqin89127@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM模型概述"><span class="nav-number">1.</span> <span class="nav-text">DOM模型概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#节点"><span class="nav-number">1.1.</span> <span class="nav-text">节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特征相关属性"><span class="nav-number">1.2.</span> <span class="nav-text">特征相关属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-nodeName-Node-nodeType"><span class="nav-number">1.2.1.</span> <span class="nav-text">Node.nodeName Node.nodeType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-nodeValue"><span class="nav-number">1.2.2.</span> <span class="nav-text">Node.nodeValue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-textContent"><span class="nav-number">1.2.3.</span> <span class="nav-text">Node.textContent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-baseURI"><span class="nav-number">1.2.4.</span> <span class="nav-text">Node.baseURI</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-firstChild-Node-lastChild"><span class="nav-number">1.2.5.</span> <span class="nav-text">Node.firstChild Node.lastChild</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点对象的方法"><span class="nav-number">1.3.</span> <span class="nav-text">节点对象的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-appendChild"><span class="nav-number">1.3.1.</span> <span class="nav-text">Node.appendChild()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-hasChildNodes"><span class="nav-number">1.3.2.</span> <span class="nav-text">Node.hasChildNodes()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-cloneNode"><span class="nav-number">1.3.3.</span> <span class="nav-text">Node.cloneNode()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-insertBefore"><span class="nav-number">1.3.4.</span> <span class="nav-text">Node.insertBefore()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-removeChild"><span class="nav-number">1.3.5.</span> <span class="nav-text">Node.removeChild()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-replaceChild"><span class="nav-number">1.3.6.</span> <span class="nav-text">Node.replaceChild()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-contains"><span class="nav-number">1.3.7.</span> <span class="nav-text">Node.contains()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-compareDocumentPosition"><span class="nav-number">1.3.8.</span> <span class="nav-text">Node.compareDocumentPosition()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-isEqualNode"><span class="nav-number">1.3.9.</span> <span class="nav-text">Node.isEqualNode()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-normalize"><span class="nav-number">1.3.10.</span> <span class="nav-text">Node.normalize()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点的集合对象"><span class="nav-number">1.4.</span> <span class="nav-text">节点的集合对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NodeList-对象"><span class="nav-number">1.4.1.</span> <span class="nav-text">NodeList 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTMLCollection-对象"><span class="nav-number">1.4.2.</span> <span class="nav-text">HTMLCollection 对象</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ParentNode-接口，ChildNode-接口"><span class="nav-number">1.5.</span> <span class="nav-text">ParentNode 接口，ChildNode 接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ParentNode接口"><span class="nav-number">1.5.1.</span> <span class="nav-text">ParentNode接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ChildNode-接口"><span class="nav-number">1.5.2.</span> <span class="nav-text">ChildNode 接口</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Document-节点"><span class="nav-number">2.</span> <span class="nav-text">Document 节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#内部属性节点"><span class="nav-number">2.1.</span> <span class="nav-text">内部属性节点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-doctype"><span class="nav-number">2.1.1.</span> <span class="nav-text">document.doctype</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-documentElement"><span class="nav-number">2.1.2.</span> <span class="nav-text">document.documentElement</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-defaultView"><span class="nav-number">2.1.3.</span> <span class="nav-text">document.defaultView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-body-document-head"><span class="nav-number">2.1.4.</span> <span class="nav-text">document.body,document.head</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-activeElement"><span class="nav-number">2.1.5.</span> <span class="nav-text">document.activeElement</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点集合属性"><span class="nav-number">2.2.</span> <span class="nav-text">节点集合属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-links，document-forms，document-images，document-embeds"><span class="nav-number">2.2.1.</span> <span class="nav-text">document.links，document.forms，document.images，document.embeds</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-scripts，document-styleSheets"><span class="nav-number">2.2.2.</span> <span class="nav-text">document.scripts，document.styleSheets</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文档信息属性"><span class="nav-number">2.3.</span> <span class="nav-text">文档信息属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-documentURI，document-URL"><span class="nav-number">2.3.1.</span> <span class="nav-text">document.documentURI，document.URL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-domain"><span class="nav-number">2.3.2.</span> <span class="nav-text">document.domain</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-lastModified"><span class="nav-number">2.3.3.</span> <span class="nav-text">document.lastModified</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-location"><span class="nav-number">2.3.4.</span> <span class="nav-text">document.location</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-referrer，document-title，document-characterSet"><span class="nav-number">2.3.5.</span> <span class="nav-text">document.referrer，document.title，document.characterSet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-readyState"><span class="nav-number">2.3.6.</span> <span class="nav-text">document.readyState</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-designMode"><span class="nav-number">2.3.7.</span> <span class="nav-text">document.designMode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-implementation"><span class="nav-number">2.3.8.</span> <span class="nav-text">document.implementation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-compatMode"><span class="nav-number">2.3.9.</span> <span class="nav-text">document.compatMode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-cookie"><span class="nav-number">2.3.10.</span> <span class="nav-text">document.cookie</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读写相关的方法"><span class="nav-number">2.4.</span> <span class="nav-text">读写相关的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-write-，document-writeln"><span class="nav-number">2.4.1.</span> <span class="nav-text">document.write()，document.writeln()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查找节点的方法"><span class="nav-number">2.5.</span> <span class="nav-text">查找节点的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-querySelector-，document-querySelectorAll"><span class="nav-number">2.5.1.</span> <span class="nav-text">document.querySelector()，document.querySelectorAll()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-getElementsByTagName"><span class="nav-number">2.5.2.</span> <span class="nav-text">document.getElementsByTagName()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-getElementsByClassName"><span class="nav-number">2.5.3.</span> <span class="nav-text">document.getElementsByClassName()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-getElementsByName"><span class="nav-number">2.5.4.</span> <span class="nav-text">document.getElementsByName()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getElementById"><span class="nav-number">2.5.5.</span> <span class="nav-text">getElementById()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-elementFromPoint"><span class="nav-number">2.5.6.</span> <span class="nav-text">document.elementFromPoint()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成节点的方法"><span class="nav-number">2.6.</span> <span class="nav-text">生成节点的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createElement"><span class="nav-number">2.6.1.</span> <span class="nav-text">document.createElement()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createTextNode"><span class="nav-number">2.6.2.</span> <span class="nav-text">document.createTextNode()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createAttribute"><span class="nav-number">2.6.3.</span> <span class="nav-text">document.createAttribute()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createDocumentFragment"><span class="nav-number">2.6.4.</span> <span class="nav-text">document.createDocumentFragment()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件相关的方法"><span class="nav-number">2.7.</span> <span class="nav-text">事件相关的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createEvent"><span class="nav-number">2.7.1.</span> <span class="nav-text">document.createEvent()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-addEventListener-，document-removeEventListener-，document-dispatchEvent"><span class="nav-number">2.7.2.</span> <span class="nav-text">document.addEventListener()，document.removeEventListener()，document.dispatchEvent()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他方法"><span class="nav-number">2.8.</span> <span class="nav-text">其他方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document-hasFocus"><span class="nav-number">2.8.1.</span> <span class="nav-text">document.hasFocus()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-createNodeIterator-，document-createTreeWalker"><span class="nav-number">2.8.2.</span> <span class="nav-text">document.createNodeIterator()，document.createTreeWalker()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-adoptNode"><span class="nav-number">2.8.3.</span> <span class="nav-text">document.adoptNode()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#document-importNode"><span class="nav-number">2.8.4.</span> <span class="nav-text">document.importNode()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Element-节点"><span class="nav-number">3.</span> <span class="nav-text">Element 节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特征相关的属性"><span class="nav-number">3.1.</span> <span class="nav-text">特征相关的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-attributes"><span class="nav-number">3.1.1.</span> <span class="nav-text">Element.attributes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-id，Element-tagName"><span class="nav-number">3.1.2.</span> <span class="nav-text">Element.id，Element.tagName</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-innerHTML"><span class="nav-number">3.1.3.</span> <span class="nav-text">Element.innerHTML</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-outerHTML"><span class="nav-number">3.1.4.</span> <span class="nav-text">Element.outerHTML</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-className-Element-classList"><span class="nav-number">3.1.5.</span> <span class="nav-text">Element.className , Element.classList</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#盒装模型相关属性"><span class="nav-number">3.2.</span> <span class="nav-text">盒装模型相关属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-clientHeight-Element-clientWidth"><span class="nav-number">3.2.1.</span> <span class="nav-text">Element.clientHeight,Element.clientWidth</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-clientLeft-Element-clientTop"><span class="nav-number">3.2.2.</span> <span class="nav-text">Element.clientLeft,Element.clientTop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-scrollLeft-Element-scrollTop"><span class="nav-number">3.2.3.</span> <span class="nav-text">Element.scrollLeft,Element.scrollTop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-scrollWidth-Element-scrollHeight"><span class="nav-number">3.2.4.</span> <span class="nav-text">Element.scrollWidth,Element.scrollHeight</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-offsetHeight-Element-offsetWidth"><span class="nav-number">3.2.5.</span> <span class="nav-text">Element.offsetHeight , Element.offsetWidth</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-offsetLeft，Element-offsetTop"><span class="nav-number">3.2.6.</span> <span class="nav-text">Element.offsetLeft，Element.offsetTop</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相关节点的属性"><span class="nav-number">3.3.</span> <span class="nav-text">相关节点的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-children，Element-childElementCount"><span class="nav-number">3.3.1.</span> <span class="nav-text">Element.children，Element.childElementCount</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-firstElementChild，Element-lastElementChild"><span class="nav-number">3.3.2.</span> <span class="nav-text">Element.firstElementChild，Element.lastElementChild</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-nextElementSibling，Element-previousElementSibling"><span class="nav-number">3.3.3.</span> <span class="nav-text">Element.nextElementSibling，Element.previousElementSibling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-offsetParent"><span class="nav-number">3.3.4.</span> <span class="nav-text">Element.offsetParent</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性相关的方法"><span class="nav-number">3.4.</span> <span class="nav-text">属性相关的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查找相关方法"><span class="nav-number">3.5.</span> <span class="nav-text">查找相关方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件相关的方法-1"><span class="nav-number">3.6.</span> <span class="nav-text">事件相关的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他方法-1"><span class="nav-number">3.7.</span> <span class="nav-text">其他方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-scrollIntoView"><span class="nav-number">3.7.1.</span> <span class="nav-text">Element.scrollIntoView()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-getBoundingClientRect"><span class="nav-number">3.7.2.</span> <span class="nav-text">Element.getBoundingClientRect()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-getClientRects"><span class="nav-number">3.7.3.</span> <span class="nav-text">Element.getClientRects()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-insertAdjacentHTML"><span class="nav-number">3.7.4.</span> <span class="nav-text">Element.insertAdjacentHTML()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-remove"><span class="nav-number">3.7.5.</span> <span class="nav-text">Element.remove()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-focus"><span class="nav-number">3.7.6.</span> <span class="nav-text">Element.focus()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性的操作"><span class="nav-number">4.</span> <span class="nav-text">属性的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Element-attributes-属性"><span class="nav-number">4.1.</span> <span class="nav-text">Element.attributes 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元素节点对象的属性"><span class="nav-number">4.2.</span> <span class="nav-text">元素节点对象的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性操作的标准方法"><span class="nav-number">4.3.</span> <span class="nav-text">属性操作的标准方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#getAttribute"><span class="nav-number">4.3.1.</span> <span class="nav-text">getAttribute()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setAttribute"><span class="nav-number">4.3.2.</span> <span class="nav-text">setAttribute()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hasAttribute"><span class="nav-number">4.3.3.</span> <span class="nav-text">hasAttribute()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#removeAttribute"><span class="nav-number">4.3.4.</span> <span class="nav-text">removeAttribute()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataset-属性"><span class="nav-number">4.4.</span> <span class="nav-text">dataset 属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Text-节点和-DocumentFragment-节点"><span class="nav-number">5.</span> <span class="nav-text">Text 节点和 DocumentFragment 节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Text-节点的概念"><span class="nav-number">5.1.</span> <span class="nav-text">Text 节点的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Text-节点的属性"><span class="nav-number">5.2.</span> <span class="nav-text">Text 节点的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#data"><span class="nav-number">5.2.1.</span> <span class="nav-text">data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wholeText"><span class="nav-number">5.2.2.</span> <span class="nav-text">wholeText</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Text-节点的方法"><span class="nav-number">5.3.</span> <span class="nav-text">Text 节点的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DocumentFragment-节点"><span class="nav-number">5.4.</span> <span class="nav-text">DocumentFragment 节点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件模型"><span class="nav-number">6.</span> <span class="nav-text">事件模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#EventTarget-接口"><span class="nav-number">6.1.</span> <span class="nav-text">EventTarget 接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#addEventListener"><span class="nav-number">6.2.</span> <span class="nav-text">addEventListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#removeEventListener"><span class="nav-number">6.3.</span> <span class="nav-text">removeEventListener()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dispatchEvent"><span class="nav-number">6.4.</span> <span class="nav-text">dispatchEvent()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#监听函数"><span class="nav-number">6.5.</span> <span class="nav-text">监听函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTML-标签的-on-属性"><span class="nav-number">6.5.1.</span> <span class="nav-text">HTML 标签的 on- 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Element-节点的事件属性"><span class="nav-number">6.5.2.</span> <span class="nav-text">Element 节点的事件属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#addEventListener方法"><span class="nav-number">6.5.3.</span> <span class="nav-text">addEventListener方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#this-对象的指向"><span class="nav-number">6.5.4.</span> <span class="nav-text">this 对象的指向</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件的传播"><span class="nav-number">6.6.</span> <span class="nav-text">事件的传播</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#传播的三个阶段"><span class="nav-number">6.6.1.</span> <span class="nav-text">传播的三个阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-属性"><span class="nav-number">6.6.2.</span> <span class="nav-text">event 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-currentTarget，event-target"><span class="nav-number">6.6.3.</span> <span class="nav-text">event.currentTarget，event.target</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-type，event-detail，event-timeStamp，event-isTrusted"><span class="nav-number">6.6.4.</span> <span class="nav-text">event.type，event.detail，event.timeStamp，event.isTrusted</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-preventDefault"><span class="nav-number">6.6.5.</span> <span class="nav-text">event.preventDefault()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-stopPropagation"><span class="nav-number">6.6.6.</span> <span class="nav-text">event.stopPropagation()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event-stopImmediatePropagation"><span class="nav-number">6.6.7.</span> <span class="nav-text">event.stopImmediatePropagation()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件种类"><span class="nav-number">7.</span> <span class="nav-text">事件种类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#鼠标事件"><span class="nav-number">7.1.</span> <span class="nav-text">鼠标事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#onclick-dblclick"><span class="nav-number">7.1.1.</span> <span class="nav-text">onclick ,dblclick</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mouseup-mousedown-mousemove"><span class="nav-number">7.1.2.</span> <span class="nav-text">mouseup mousedown mousemove</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mouseover，mouseenter"><span class="nav-number">7.1.3.</span> <span class="nav-text">mouseover，mouseenter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mouseout，mouseleave"><span class="nav-number">7.1.4.</span> <span class="nav-text">mouseout，mouseleave</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#contextmenu-事件"><span class="nav-number">7.1.5.</span> <span class="nav-text">contextmenu 事件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MouseEvent-对象"><span class="nav-number">7.2.</span> <span class="nav-text">MouseEvent 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#altKey，ctrlKey，metaKey，shiftKey"><span class="nav-number">7.2.1.</span> <span class="nav-text">altKey，ctrlKey，metaKey，shiftKey</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#button，buttons"><span class="nav-number">7.2.2.</span> <span class="nav-text">button，buttons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clientX，clientY"><span class="nav-number">7.2.3.</span> <span class="nav-text">clientX，clientY</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#movementX，movementY"><span class="nav-number">7.2.4.</span> <span class="nav-text">movementX，movementY</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#screenX，screenY"><span class="nav-number">7.2.5.</span> <span class="nav-text">screenX，screenY</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wheel-事件"><span class="nav-number">7.3.</span> <span class="nav-text">Wheel 事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#键盘事件"><span class="nav-number">7.4.</span> <span class="nav-text">键盘事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进度事件"><span class="nav-number">7.5.</span> <span class="nav-text">进度事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拖拉事件"><span class="nav-number">7.6.</span> <span class="nav-text">拖拉事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#事件种类-1"><span class="nav-number">7.6.1.</span> <span class="nav-text">事件种类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DataTransfer-对象概述"><span class="nav-number">7.6.2.</span> <span class="nav-text">DataTransfer 对象概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DataTransfer-对象的属性"><span class="nav-number">7.6.3.</span> <span class="nav-text">DataTransfer 对象的属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DataTransfer-对象的方法"><span class="nav-number">7.6.4.</span> <span class="nav-text">DataTransfer 对象的方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#触摸事件"><span class="nav-number">7.7.</span> <span class="nav-text">触摸事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Touch-对象"><span class="nav-number">7.7.1.</span> <span class="nav-text">Touch 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TouchList-对象"><span class="nav-number">7.7.2.</span> <span class="nav-text">TouchList 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TouchEvent-对象"><span class="nav-number">7.7.3.</span> <span class="nav-text">TouchEvent 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#触摸事件的种类"><span class="nav-number">7.7.4.</span> <span class="nav-text">触摸事件的种类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表单事件"><span class="nav-number">7.8.</span> <span class="nav-text">表单事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Input事件，select事件，change事件"><span class="nav-number">7.8.1.</span> <span class="nav-text">Input事件，select事件，change事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reset事件，submit事件"><span class="nav-number">7.8.2.</span> <span class="nav-text">reset事件，submit事件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文档事件"><span class="nav-number">7.9.</span> <span class="nav-text">文档事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#beforeunload-事件"><span class="nav-number">7.9.1.</span> <span class="nav-text">beforeunload 事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unload-事件"><span class="nav-number">7.9.2.</span> <span class="nav-text">unload 事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#load事件，error事件"><span class="nav-number">7.9.3.</span> <span class="nav-text">load事件，error事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pageshow事件，pagehide事件"><span class="nav-number">7.9.4.</span> <span class="nav-text">pageshow事件，pagehide事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DOMContentLoaded事件"><span class="nav-number">7.9.5.</span> <span class="nav-text">DOMContentLoaded事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#readystatechange事件"><span class="nav-number">7.9.6.</span> <span class="nav-text">readystatechange事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#scroll事件"><span class="nav-number">7.9.7.</span> <span class="nav-text">scroll事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#resize事件"><span class="nav-number">7.9.8.</span> <span class="nav-text">resize事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#焦点事件"><span class="nav-number">7.9.9.</span> <span class="nav-text">焦点事件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS-操作"><span class="nav-number">8.</span> <span class="nav-text">CSS 操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#style-属性"><span class="nav-number">8.1.</span> <span class="nav-text">style 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Style-对象"><span class="nav-number">8.2.</span> <span class="nav-text">Style 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cssText-属性"><span class="nav-number">8.2.1.</span> <span class="nav-text">cssText 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSS-模块的侦测"><span class="nav-number">8.2.2.</span> <span class="nav-text">CSS 模块的侦测</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setProperty-，getPropertyValue-，removeProperty"><span class="nav-number">8.2.3.</span> <span class="nav-text">setProperty()，getPropertyValue()，removeProperty()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#window-getComputedStyle"><span class="nav-number">8.2.4.</span> <span class="nav-text">window.getComputedStyle()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS-伪元素"><span class="nav-number">8.3.</span> <span class="nav-text">CSS 伪元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StyleSheet对象"><span class="nav-number">8.4.</span> <span class="nav-text">StyleSheet对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取样式表"><span class="nav-number">8.4.1.</span> <span class="nav-text">获取样式表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性"><span class="nav-number">8.4.2.</span> <span class="nav-text">属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#insertRule-，deleteRule"><span class="nav-number">8.4.3.</span> <span class="nav-text">insertRule()，deleteRule()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加样式表"><span class="nav-number">8.4.4.</span> <span class="nav-text">添加样式表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS-规则"><span class="nav-number">8.5.</span> <span class="nav-text">CSS 规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#window-matchMedia"><span class="nav-number">8.6.</span> <span class="nav-text">window.matchMedia()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#监听事件"><span class="nav-number">8.6.1.</span> <span class="nav-text">监听事件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS事件"><span class="nav-number">8.7.</span> <span class="nav-text">CSS事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#transitionEnd-事件"><span class="nav-number">8.7.1.</span> <span class="nav-text">transitionEnd 事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#animationstart事件，animationend事件，animationiteration事件"><span class="nav-number">8.7.2.</span> <span class="nav-text">animationstart事件，animationend事件，animationiteration事件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mutation-Observer-API"><span class="nav-number">9.</span> <span class="nav-text">Mutation Observer API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概述"><span class="nav-number">9.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MutationObserver-构造函数"><span class="nav-number">9.2.</span> <span class="nav-text">MutationObserver 构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例方法"><span class="nav-number">9.3.</span> <span class="nav-text">实例方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#observe"><span class="nav-number">9.3.1.</span> <span class="nav-text">observe()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disconnect-takeRecords"><span class="nav-number">9.3.2.</span> <span class="nav-text">disconnect(),takeRecords()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MutationRecord-对象"><span class="nav-number">9.4.</span> <span class="nav-text">MutationRecord 对象</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hutchins</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Symbols count total: </span>
    
    <span title="Symbols count total">197k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    
    <span title="Reading time total">2:59</span>
  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: true,
    appId: 'tfBOMNylBsVQxobhIkvEGve5-gzGzoHsz',
    appKey: 'OsMcNeSXT83jo3CdPyJ0fVHw',
    placeholder: 'say say what',
    avatar: 'robohash',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false
  });
</script>




  


  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  
  
  <script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.time + 1);
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .fail(function ({ responseJSON }) {
                console.log(`Failed to save Visitor num, with error message: ${responseJSON.error}`);
              })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! More info at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log(`LeanCloud Counter Error: ${responseJSON.code} ${responseJSON.error}`);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'tfBOMNylBsVQxobhIkvEGve5-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'tfBOMNylBsVQxobhIkvEGve5-gzGzoHsz',
                'X-LC-Key': 'OsMcNeSXT83jo3CdPyJ0fVHw',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script>



  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
