{"componentChunkName":"component---src-templates-post-detail-tsx","path":"/post-2017-09-07","webpackCompilationHash":"bf5d5bf3e0ba8401eac5","result":{"data":{"site":{"siteMetadata":{"title":"Silence","author":"默尝"}},"markdownRemark":{"id":"44df2842-c644-536a-bc79-d5239504c8d9","excerpt":"前阵子无聊，LOL 也不是很想玩，发现了电脑中自带的扫雷，当时在一个神奇的地方，用的是一个 windows2000 的系统界面但是扫雷确是 win…","html":"<blockquote>\n<p>前阵子无聊，LOL 也不是很想玩，发现了电脑中自带的扫雷，当时在一个神奇的地方，用的是一个 windows2000 的系统界面但是扫雷确是 win7 的样式，玩了几局，其中有一局很崩溃，我先上图为敬。</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2316296c32105626b90883936e9320f/b97fe/pic1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQBAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGXKSSO0f/EABoQAAMBAAMAAAAAAAAAAAAAAAABBAIRExT/2gAIAQEAAQUCUyZ50dQqcDowOnPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhABAAIDAQAAAAAAAAAAAAAAAAEyAjFBQv/aAAgBAQAGPwLr061krKsv/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERwSFR0aH/2gAIAQEAAT8hR9jW+iOxEoQkseJJUn//2gAMAwEAAgADAAAAEBw//8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8Qqv/EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/EIf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUHRgaHw/9oACAEBAAE/EOKHGAdShHlTqZXXeI0Ah8cx9gvBS/cQm9vcf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pic1\"\n        title=\"pic1\"\n        src=\"/static/e2316296c32105626b90883936e9320f/c739e/pic1.jpg\"\n        srcset=\"/static/e2316296c32105626b90883936e9320f/8ee9c/pic1.jpg 148w,\n/static/e2316296c32105626b90883936e9320f/ebbe7/pic1.jpg 295w,\n/static/e2316296c32105626b90883936e9320f/c739e/pic1.jpg 590w,\n/static/e2316296c32105626b90883936e9320f/5413e/pic1.jpg 885w,\n/static/e2316296c32105626b90883936e9320f/4efde/pic1.jpg 1180w,\n/static/e2316296c32105626b90883936e9320f/b97fe/pic1.jpg 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>这种情况，就是考验运气的时候了，但是果不其然…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ddae0e6116322c660bc6a0d4c7102ee/b97fe/pic2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABl1QxOaPF/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAQBAhEDExT/2gAIAQEAAQUChbTyHSVZoS1Qljj3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBABAAMBAAAAAAAAAAAAAAAAAAExQZH/2gAIAQEABj8CuVytvG8a/8QAGxABAQACAwEAAAAAAAAAAAAAAQARMSGRodH/2gAIAQEAAT8hHWVnPiTg7dR6xmmfC//aAAwDAQACAAMAAAAQjC//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAwABBQAAAAAAAAAAAAABABEh0UFRYZHh/9oACAEBAAE/ELkEnQqDopC9hkDnkSoQv3pzEldE3HMUJ7/c/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pic2\"\n        title=\"pic2\"\n        src=\"/static/6ddae0e6116322c660bc6a0d4c7102ee/c739e/pic2.jpg\"\n        srcset=\"/static/6ddae0e6116322c660bc6a0d4c7102ee/8ee9c/pic2.jpg 148w,\n/static/6ddae0e6116322c660bc6a0d4c7102ee/ebbe7/pic2.jpg 295w,\n/static/6ddae0e6116322c660bc6a0d4c7102ee/c739e/pic2.jpg 590w,\n/static/6ddae0e6116322c660bc6a0d4c7102ee/5413e/pic2.jpg 885w,\n/static/6ddae0e6116322c660bc6a0d4c7102ee/4efde/pic2.jpg 1180w,\n/static/6ddae0e6116322c660bc6a0d4c7102ee/b97fe/pic2.jpg 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>行吧…</p>\n<h2>布局</h2>\n<p>玩了几局搞清了游戏规则，就想自己动手做一个，因为以前做过 2048，所以首先想到的就是用二维数组布局</p>\n<p>添加三个难度的按钮</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>9<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>9<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-mine</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>简单<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-mine</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>40<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span>中级<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span>\n<span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>30<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-mine</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>99<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">></span></span>高级<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span>\n<span class=\"token punctuation\">></span></span></code></pre></div>\n<p>点击相应按钮通过 js 获取对应的 <code class=\"language-text\">data</code> 属性,然后动态的生成相应的方格,然后动态计算包裹所有小方格的宽度和高度,为了以后方便操作每一个小方格,给每一个小方格按行列添加独有的 <code class=\"language-text\">id</code>。</p>\n<h2>盒子对象</h2>\n<h3>属性</h3>\n<p>因为扫雷是对每个格子进行操作，因此我把每个格子都看成一个独立的个体，这个个体具有属性和方法，就相当于一个小对象。定义了两个数组</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//代表盒子身份的数组</span>\n<span class=\"token keyword\">var</span> boxArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">//用于存储周围八个格子中雷的个数</span>\n<span class=\"token keyword\">var</span> MineArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>通过这两个数组,我可以知道每个格子是否是炸弹,还有每个格子周围对应八个格子中有多少个炸弹，这属于格子对象的属性。</p>\n<h3>方法</h3>\n<p>盒子对象还有鼠标按下和抬起的方法，这里要注意，不要给每个盒子都添加事件。假设有 100 个盒子的话，就要添加 100 个事件，事实上高级难度下的盒子话还有更多，这样就不如在<code class=\"language-text\">container</code>上绑定事件，利用冒泡。也可以实现相同的效果，并且只需要绑定一个事件</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">container<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mousedown'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.box'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token comment\">//获取点击到的class为box的元素</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>，有的时候格子的 <code class=\"language-text\">MineArr</code> 里面存的可能是 0,这就代表他周围 8 个不存在炸弹,像这种的话就直接将其周围的八个格子直接自动点开就好了,下面这幅图，我只点了一下,就是点到了 <code class=\"language-text\">MineArr[i][j]==0</code> 的格子,然后让他周围八个直接显示 <code class=\"language-text\">MineArr</code> 中的数值,如果周围八个格子还有 <code class=\"language-text\">MineArr[i][j]==0</code> 的情况，就继续打开去显示。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 477px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5bc12c594f3adec278e629c0686b5fb2/bad17/pic3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.58490566037736%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACZklEQVQoz52R208TURDG+f984ckYE40X7sUahAILpWKBYgWJEETlgQQSJCYQb9EnKLd2u9tt99Kzu+ec3VLKtdvLFhIiAt22nhZNILE+OPkymZzML9/MnJqQePSgQ3QMKg1d4os3sSZKsj8F9Q7RO6XbXaDVCeo7xf4xRD2Hjd2SrTdKdK9NmF3cK5VKNb5A5sZ9tmNIvdkceeJWaus4m1O+3Rp53C/fsvHk5Y6db+yKNlASgVt6wN02vvZhaGx6qwwfHV8EIzm6oig63uSyPjq9EkiTmo6YlTrFSeZKILv0PemjM2RSP5dL7J+W4dKfyFsWjKdxIqPtZEiWY2ltx0TbWRxPrrGJ4ddbfaOIk45JZ6FQvERqisWSVSiSfHqWDyuHYSXJSLtrrMZKCX8Y0/xWkNe/+WDXMGzukdaZbNkmT4DSNefzC4uHSR4agrr3dUV3j+PRd2hoEnunkHtccb3Edpcc4HLXnK/CIjJElBLg/rI/NruoL3zW5z/hiRnc7oYD45gcj1zn7/DZhVUeW01yYJ8WtkW4y4E4F1XnluSWXoXywkYqusGaVZ0lbFSUIhJUA+hmGCQWvmjdw8gzqXV6VIav5nxecSaSDzn5gKhSJ+aWUBMFKK9K/vnyYFV2xoaIU0QCSokozUq7IVGf/wgdHjw4obUP/mPn87wADUbcYYQYw+OgoAuqPv1ec47A9gFybfTIBfycWRUmn8xK8ZkPSt8ocL8CI2+VtmegtU+2OYFjSK1zSGvBKmNbViFl/sjkTiT1aHnTXKXNDTa3zpjEbYMx6XBulc4eGD9JZ/E3ewX+j/gFx0bsVkNgGO0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pic3\"\n        title=\"pic3\"\n        src=\"/static/5bc12c594f3adec278e629c0686b5fb2/bad17/pic3.png\"\n        srcset=\"/static/5bc12c594f3adec278e629c0686b5fb2/cf440/pic3.png 148w,\n/static/5bc12c594f3adec278e629c0686b5fb2/d2d38/pic3.png 295w,\n/static/5bc12c594f3adec278e629c0686b5fb2/bad17/pic3.png 477w\"\n        sizes=\"(max-width: 477px) 100vw, 477px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>扫雷中还有一个一定要有的方法就是左右键一起按一个点开的格子，会自动判断周围格子中你标记雷的个数和你点击的这个格子的数值。如果你标记雷的个数等于左右键点击的格子中的数值，他会自动帮你点开剩下的还没点击过的格子，这些格子中可能有雷也可能没雷，这要看你自己标记的雷是不是对的。</p>\n<p>这个也蛮好实现,右键按下的时候将周围没点击过也没被标记过雷的方格添加带有别的颜色的<code class=\"language-text\">class</code>，然后记录周围八个方格标记的雷的个数，然后在右键松开的时候移除此<code class=\"language-text\">class</code>,并判断刚记录的标记的雷的个数和当前点击的格子的数值是否相等，然后去做下一步处理。</p>\n<h2>成功失败判断</h2>\n<p>失败很好判断，点中了 <code class=\"language-text\">boxArr</code> 为 1 的格子就判失败，就是点中了雷。</p>\n<p>成功的话我是通过点击出来的格子的数量来判断的，成功显现的格子只要等于总格子减去雷的格子就判断为游戏胜利</p>\n<h2>总结</h2>\n<p>虽然是一个比较简单的游戏，但是自己在做的时候还是碰到过不少的 bug,也学到了蛮多的,这里列一下。</p>\n<h3>清空问题</h3>\n<ul>\n<li>每次创建新的格子都要清空上次创建的所有格子</li>\n<li>我是采用冒泡的方式给盒子添加的点击事件，是添加在 <code class=\"language-text\">container</code> 上的，然后 <code class=\"language-text\">container</code> 是不消失的，所以每次创建新格子前还需要将 <code class=\"language-text\">container</code> 上的事件解绑</li>\n</ul>\n<h3>右键</h3>\n<p>右键在网页上是有默认行为的，在这个游戏中要禁掉</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//去掉默认的contextmenu事件，否则会和默认右键事件同时出现。</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oncontextmenu</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>each()</h3>\n<p>jquery 中的 <code class=\"language-text\">each</code> 是不能用 <code class=\"language-text\">break</code> 跳出的。是用 <code class=\"language-text\">return false</code> 代替的 <code class=\"language-text\">break</code>, <code class=\"language-text\">return true</code> 或 <code class=\"language-text\">return</code> 代替的 <code class=\"language-text\">continue</code></p>\n<h3>最后</h3>\n<p>还有一些我思路上或者说写法中存在的小 bug,我用相应的方法去解决掉了。大家可以看<a href=\"https://github.com/MLuminary/subentry/tree/master/cleanMine\">源码</a>,因为花的时间比较短,可能里面还存在一些问题,还请大佬们多多包涵,也欢迎大佬们来指正。本小白感激不尽，喜欢的话还请点个 ✨</p>\n<p><a href=\"http://haoqinzz.cn/cleanMine\">小游戏试玩</a></p>","frontmatter":{"title":"简易扫雷小游戏","date":"September 07, 2017"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/简易扫雷小游戏/","previous":{"fields":{"slug":"/prop和attr的一些理解/"},"frontmatter":{"title":"prop 和 attr 的一些理解","date":"2017-11-24"}},"next":{"fields":{"slug":"/对象类型的鉴别/"},"frontmatter":{"title":"对象类型的鉴别","date":"2017-08-24"}}}}}